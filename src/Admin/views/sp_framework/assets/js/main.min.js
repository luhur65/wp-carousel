!function($,window,document,undefined){"use strict";var SP_WPCP_Framework=SP_WPCP_Framework||{};SP_WPCP_Framework.funcs={},SP_WPCP_Framework.vars={onloaded:!1,$body:$("body"),$window:$(window),$document:$(document),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:$("body").hasClass("rtl")},SP_WPCP_Framework.helper={uid:function(prefix){return(prefix||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(str){return(str+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function($selector,field_id){var checks=[],regex=new RegExp(SP_WPCP_Framework.helper.preg_quote(field_id+"[\\d+]"),"g");$selector.find(":radio").each((function(){(this.checked||this.original_checked)&&(this.original_checked=!0)})),$selector.each((function(index){$(this).find(":input").each((function(){this.name=this.name.replace(regex,field_id+"["+index+"]"),this.original_checked&&(this.checked=!0)}))}))},debounce:function(callback,threshold,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||callback.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,threshold),callNow&&callback.apply(context,args)}},get_cookie:function(name){var e,b,cookie=document.cookie,p=name+"=";if(cookie){if(-1===(b=cookie.indexOf("; "+p))){if(0!==(b=cookie.indexOf(p)))return null}else b+=2;return-1===(e=cookie.indexOf(";",b))&&(e=cookie.length),decodeURIComponent(cookie.substring(b+p.length,e))}},set_cookie:function(name,value,expires,path,domain,secure){var d=new Date;"object"==typeof expires&&expires.toGMTString?expires=expires.toGMTString():parseInt(expires,10)?(d.setTime(d.getTime()+1e3*parseInt(expires,10)),expires=d.toGMTString()):expires="",document.cookie=name+"="+encodeURIComponent(value)+(expires?"; expires="+expires:"")+(path?"; path="+path:"")+(domain?"; domain="+domain:"")+(secure?"; secure":"")}},$.fn.sp_wpcp_clone=function(){for(var base=$.fn.clone.apply(this,arguments),clone=this.find("select").add(this.filter("select")),cloned=base.find("select").add(base.filter("select")),i=0;i<clone.length;++i)for(var j=0;j<clone[i].options.length;++j)!0===clone[i].options[j].selected&&(cloned[i].options[j].selected=!0);return this.find(":radio").each((function(){this.original_checked=this.checked})),base},$.fn.sp_wpcp_expand_all=function(){return this.each((function(){$(this).on("click",(function(e){e.preventDefault(),$(".sp_wpcp-wrapper").toggleClass("sp_wpcp-show-all"),$(".sp_wpcp-section").sp_wpcp_reload_script(),$(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")}))}))},$.fn.sp_wpcp_nav_options=function(){return this.each((function(){var $nav=$(this),$window=$(window),$wpwrap=$("#wpwrap"),$links=$nav.find("a"),$last;$window.on("hashchange sp_wpcp.hashchange",(function(){var hash=window.location.hash.replace("#tab=",""),slug=hash&&1!=hash?hash:$links.first().attr("href").replace("#tab=",""),$link=$('[data-tab-id="'+slug+'"]');if($link.length){$link.closest(".sp_wpcp-tab-item").addClass("sp_wpcp-tab-expanded").siblings().removeClass("sp_wpcp-tab-expanded"),$link.next().is("ul")&&(slug=($link=$link.next().find("li").first().find("a")).data("tab-id")),$links.removeClass("sp_wpcp-active"),$link.addClass("sp_wpcp-active"),$last&&$last.addClass("hidden");var $section=$('[data-section-id="'+slug+'"]');$section.removeClass("hidden"),$section.sp_wpcp_reload_script(),$(".sp_wpcp-section-id").val($section.index()+1),$last=$section,$wpwrap.hasClass("wp-responsive-open")&&($("html, body").animate({scrollTop:$section.offset().top-50},200),$wpwrap.removeClass("wp-responsive-open"))}})).trigger("sp_wpcp.hashchange")}))},$.fn.sp_wpcp_nav_metabox=function(){return this.each((function(){var $nav=$(this),$links=$nav.find("a"),unique_id=$nav.data("unique"),post_id=$("#post_ID").val()||"global",$last_section,$last_link;$links.on("click",(function(e){e.preventDefault();var $link=$(this),section_id=$link.data("section");void 0!==$last_link&&$last_link.removeClass("sp_wpcp-active"),void 0!==$last_section&&$last_section.addClass("hidden"),$link.addClass("sp_wpcp-active");var $section=$("#sp_wpcp-section-"+section_id);$section.removeClass("hidden"),$section.sp_wpcp_reload_script(),SP_WPCP_Framework.helper.set_cookie("sp_wpcp-last-metabox-tab-"+post_id+"-"+unique_id,section_id),$last_section=$section,$last_link=$link}));var get_cookie=SP_WPCP_Framework.helper.get_cookie("sp_wpcp-last-metabox-tab-"+post_id+"-"+unique_id);get_cookie?$nav.find('a[data-section="'+get_cookie+'"]').trigger("click"):$links.first("a").trigger("click")}))},$.fn.sp_wpcp_page_templates=function(){this.length&&$(document).on("change",".editor-page-attributes__template select, #page_template",(function(){var maybe_value=$(this).val()||"default";$(".sp_wpcp-page-templates").removeClass("sp_wpcp-metabox-show").addClass("sp_wpcp-metabox-hide"),$(".sp_wpcp-page-"+maybe_value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("sp_wpcp-metabox-hide").addClass("sp_wpcp-metabox-show")}))},$.fn.sp_wpcp_post_formats=function(){this.length&&$(document).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',(function(){var maybe_value=$(this).val()||"default";maybe_value="0"===maybe_value?"default":maybe_value,$(".sp_wpcp-post-formats").removeClass("sp_wpcp-metabox-show").addClass("sp_wpcp-metabox-hide"),$(".sp_wpcp-post-format-"+maybe_value).removeClass("sp_wpcp-metabox-hide").addClass("sp_wpcp-metabox-show")}))},$.fn.sp_wpcp_search=function(){return this.each((function(){var $this,$input;$(this).find("input").on("change keyup",(function(){var value=$(this).val(),$wrapper=$(".sp_wpcp-wrapper"),$section,$fields=$wrapper.find(".sp_wpcp-section").find("> .sp_wpcp-field:not(.sp_wpcp-depend-on)"),$titles=$fields.find("> .sp_wpcp-title, .sp_wpcp-search-tags");value.length>3?($fields.addClass("sp_wpcp-metabox-hide"),$wrapper.addClass("sp_wpcp-search-all"),$titles.each((function(){var $title=$(this);if($title.text().match(new RegExp(".*?"+value+".*?","i"))){var $field=$title.closest(".sp_wpcp-field");$field.removeClass("sp_wpcp-metabox-hide"),$field.parent().sp_wpcp_reload_script()}}))):($fields.removeClass("sp_wpcp-metabox-hide"),$wrapper.removeClass("sp_wpcp-search-all"))}))}))},$.fn.sp_wpcp_sticky=function(){return this.each((function(){var $this=$(this),$window=$(window),$inner=$this.find(".sp_wpcp-header-inner"),padding=parseInt($inner.css("padding-left"))+parseInt($inner.css("padding-right")),offset=32,scrollTop=0,lastTop=0,ticking=!1,stickyUpdate=function(){var offsetTop=$this.offset().top,stickyTop=Math.max(32,offsetTop-scrollTop),winWidth=$window.innerWidth();stickyTop<=32&&winWidth>782?($inner.css({width:$this.outerWidth()-padding}),$this.css({height:$this.outerHeight()}).addClass("sp_wpcp-sticky")):($inner.removeAttr("style"),$this.removeAttr("style").removeClass("sp_wpcp-sticky"))},requestTick=function(){ticking||requestAnimationFrame((function(){stickyUpdate(),ticking=!1})),ticking=!0},onSticky=function(){scrollTop=$window.scrollTop(),requestTick()};$window.on("scroll resize",onSticky),onSticky()}))},$.fn.sp_wpcp_dependency=function(){return this.each((function(){var $this=$(this),$fields=$this.children("[data-controller]");if($fields.length){var normal_ruleset=$.sp_wpcp_deps.createRuleset(),global_ruleset=$.sp_wpcp_deps.createRuleset(),normal_depends=[],global_depends=[];$fields.each((function(){var $field=$(this),controllers=$field.data("controller").split("|"),conditions=$field.data("condition").split("|"),values=$field.data("value").toString().split("|"),is_global=!!$field.data("depend-global"),ruleset=is_global?global_ruleset:normal_ruleset;$.each(controllers,(function(index,depend_id){var value=values[index]||"",condition=conditions[index]||conditions[0];(ruleset=ruleset.createRule('[data-depend-id="'+depend_id+'"]',condition,value)).include($field),is_global?global_depends.push(depend_id):normal_depends.push(depend_id)}))})),normal_depends.length&&$.sp_wpcp_deps.enable($this,normal_ruleset,normal_depends),global_depends.length&&$.sp_wpcp_deps.enable(SP_WPCP_Framework.vars.$body,global_ruleset,global_depends)}}))},$.fn.sp_wpcp_field_accordion=function(){return this.each((function(){var $titles;$(this).find(".sp_wpcp-accordion-title").on("click",(function(){var $title=$(this),$icon=$title.find(".sp_wpcp-accordion-icon"),$content=$title.next();$icon.hasClass("fa-angle-right")?$icon.removeClass("fa-angle-right").addClass("fa-angle-down"):$icon.removeClass("fa-angle-down").addClass("fa-angle-right"),$content.data("opened")||($content.sp_wpcp_reload_script(),$content.data("opened",!0)),$content.toggleClass("sp_wpcp-accordion-open")}))}))},$.fn.sp_wpcp_field_background=function(){return this.each((function(){$(this).find(".sp_wpcp--background-image").sp_wpcp_reload_script();var $this=$(this),$preview_block=$this.find(".sp_wpcp--block-preview");if($preview_block.length){var $preview=$this.find(".sp_wpcp--preview");$this.on("change",SP_WPCP_Framework.helper.debounce((function(event){$preview_block.removeClass("hidden");var $this=$(this),background_color=$this.find(".sp_wpcp--background-colors .sp_wpcp--color:nth-child(1n) label input").val(),background_grd_color=$this.find(".sp_wpcp--background-colors .sp_wpcp--color:nth-child(2n) label input").val(),background_grd_direction=$this.find(".sp_wpcp-fieldset .sp_wpcp--color:nth-child(3n) select").val(),background_image=$this.find(".sp_wpcp--background-image input").val(),background_position=$this.find(".sp_wpcp--background-attributes .sp_wpcp-field-select:nth-child(1n) select").val(),background_repeat=$this.find(".sp_wpcp--background-attributes .sp_wpcp-field-select:nth-child(2n) select").val(),background_attachment=$this.find(".sp_wpcp--background-attributes .sp_wpcp-field-select:nth-child(3n) select").val(),background_size=$this.find(".sp_wpcp--background-attributes .sp_wpcp-field-select:nth-child(4n) select").val(),properties={};background_color&&(properties.backgroundColor=background_color),background_grd_direction&&(properties.backgroundImage="linear-gradient("+background_grd_direction+", "+background_color+", "+background_grd_color+")"),background_image&&(background_image&&(properties.backgroundImage="url("+background_image+")"),background_repeat&&(properties.backgroundRepeat=background_repeat),background_position&&(properties.backgroundPosition=background_position),background_attachment&&(properties.backgroundAttachment=background_attachment),background_size&&(properties.backgroundSize=background_size)),$preview.removeAttr("style"),$preview.css(properties)}),100)),$preview_block.hasClass("hidden")||$this.trigger("change")}}))},$.fn.sp_wpcp_field_code_editor=function(){return this.each((function(){if("function"==typeof CodeMirror){var $this=$(this),$textarea=$this.find("textarea"),$inited=$this.find(".CodeMirror"),data_editor=$textarea.data("editor");$inited.length&&$inited.remove();var interval=setInterval((function(){if($this.is(":visible")){var code_editor=CodeMirror.fromTextArea($textarea[0],data_editor);if("default"!==data_editor.theme&&-1===SP_WPCP_Framework.vars.code_themes.indexOf(data_editor.theme)){var $cssLink=$("<link>");$("#sp_wpcp-codemirror-css").after($cssLink),$cssLink.attr({rel:"stylesheet",id:"sp_wpcp-codemirror-"+data_editor.theme+"-css",href:data_editor.cdnURL+"/theme/"+data_editor.theme+".min.css",type:"text/css",media:"all"}),SP_WPCP_Framework.vars.code_themes.push(data_editor.theme)}CodeMirror.modeURL=data_editor.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(code_editor,data_editor.mode),code_editor.on("change",(function(editor,event){$textarea.val(code_editor.getValue()).trigger("change")})),clearInterval(interval)}}))}}))},$.fn.sp_wpcp_field_datetime=function(){return this.each((function(){var $this,$inputs;$(this).find("input").each((function(){var $input;$(this).datetimepicker({format:"m/d/Y H:i"})}))}))},$.fn.sp_wpcp_field_fieldset=function(){return this.each((function(){$(this).find(".sp_wpcp-fieldset-content").sp_wpcp_reload_script()}))},$.fn.sp_wpcp_field_gallery=function(){return this.each((function(){var $this=$(this),$edit=$this.find(".sp_wpcp-edit-gallery"),$clear=$this.find(".sp_wpcp-clear-gallery"),$list=$this.find("ul.sp-gallery-images"),$sorter=$this.find("ul.sp-gallery-images"),$input=$this.find("input"),$img=$this.find("img"),wp_media_frame;$sorter.sortable({cursor:"move",update:function(event,ui){var selectedIds=Array();$(".sp-gallery-images li a.edit-attachment-modify").each((function(){selectedIds.push($(this).data("id"))})),$input.val(selectedIds.join(",")).trigger("change"),wpcp_image_edit.init()}}),$(document).find(".wpcp_image-thumbnail-delete").on("click",(function(e){e.preventDefault(),$(this).parents("li").remove(),setTimeout(()=>{wpcp_image_edit.init();var selectedIds=Array();$(".sp-gallery-images li a.edit-attachment-modify").each((function(){selectedIds.push($(this).data("id"))})),$input.val(selectedIds.join(",")).trigger("change")},500)})),$this.on("click",".sp_wpcp-button, .sp_wpcp-edit-gallery",(function(e){var $el=$(this),ids=$input.val(),what=$el.hasClass("sp_wpcp-edit-gallery")?"edit":"add",state="add"!==what||ids.length?"gallery-edit":"gallery";e.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&("gallery"===state?(wp_media_frame=window.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(wp_media_frame=window.wp.media.gallery.edit('[gallery ids="'+ids+'"]'),"add"===what&&wp_media_frame.setState("gallery-library")),wp_media_frame.on("update",(function(selection){$list.empty();const selectedIds=selection.models.map(attachment=>{const item=attachment.toJSON(),thumb=item.sizes&&item.sizes.thumbnail&&item.sizes.thumbnail.url||item.url,dataItem={...item};delete dataItem.compat,delete dataItem.nonces,delete dataItem.sizes,$list.append(`<li>\n\t\t\t\t\t\t\t\t<img src="${thumb}">\n\t\t\t\t\t\t\t\t<a class="edit-attachment-modify ${item.id} wcp-icon edit-icon"\n\t\t\t\t\t\t\t\tdata-id="${item.id}" href="#">\n\t\t\t\t\t\t\t\t\t<span class="wpcp-icon-edit"></span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<a class="wpcp_image-thumbnail-delete remove-icon wcp-icon"\n\t\t\t\t\t\t\t\tdata-id="${item.id}" href="#">\n\t\t\t\t\t\t\t\t\t<span class="wpcp-icon-delete"></span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>`);const jsonString=JSON.stringify(dataItem),currentItem=$list.find(`.edit-attachment-modify.${item.id}`);return currentItem.attr("data-wpcp_image-model",jsonString),item.id});$input.val(selectedIds.join(",")).trigger("change"),$clear.removeClass("hidden"),$edit.removeClass("hidden"),wpcp_image_edit.init(),$(document).find(".wpcp_image-thumbnail-delete").on("click",(function(e){e.preventDefault(),$(this).closest("li").remove();const updatedIds=[];$(".sp-gallery-images li a.edit-attachment-modify").each((function(){updatedIds.push($(this).data("id"))})),$input.val(updatedIds.join(",")).trigger("change"),wpcp_image_edit.init()})),setTimeout(()=>{selectedIds.forEach(id=>{const currentItem=$list.find(`.edit-attachment-modify.${id}`),jsonData=currentItem.data("wpcp_image-model");wp.media.ajax("wpcp_image_get_attachment_links",{data:{nonce:sp_wpcp_metabox_local.save_nonce,attachment_id:id},success(response){const mergedObject={...jsonData,...response},updatedJsonString=JSON.stringify(mergedObject);currentItem.attr("data-wpcp_image-model",updatedJsonString),wpcp_image_edit.init()},error(error_message){console.error("Error fetching attachment links:",error_message)}})})},2e3)})))})),$this.on("click",".edit-attachment",(function(e){var $el=$(this),ids=$input.val(),what=$el.hasClass("sp_wpcp-edit-gallery")?"edit":"add",attachId=$el.data("id"),state="add"!==what||ids.length?"gallery-edit":"gallery";if(e.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery){var attachment=wp.media.attachment();wp.media.editor.open({title:"Edit Image",multiple:!1,button:{text:"Select"},selection:attachment})}})),$clear.on("click",(function(e){e.preventDefault(),$list.empty(),$input.val("").trigger("change"),$clear.addClass("hidden"),$edit.addClass("hidden")}))}))},$.fn.sp_wpcp_field_group=function(){return this.each((function(){var $this=$(this),$fieldset=$this.children(".sp_wpcp-fieldset"),$group=$fieldset.length?$fieldset:$this,$wrapper=$group.children(".sp_wpcp-cloneable-wrapper"),$hidden=$group.children(".sp_wpcp-cloneable-hidden"),$max=$group.children(".sp_wpcp-cloneable-max"),$min=$group.children(".sp_wpcp-cloneable-min"),field_id=$wrapper.data("field-id"),is_number=Boolean(Number($wrapper.data("title-number"))),max=parseInt($wrapper.data("max")),min=parseInt($wrapper.data("min"));$wrapper.hasClass("ui-accordion")&&$wrapper.find(".ui-accordion-header-icon").remove();var update_title_numbers=function($selector){$selector.find(".sp_wpcp-cloneable-title-number").each((function(index){$(this).html($(this).closest(".sp_wpcp-cloneable-item").index()+1+".")}))};$wrapper.accordion({header:"> .sp_wpcp-cloneable-item > .sp_wpcp-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",beforeActivate:function(event,ui){var $panel=ui.newPanel,$header=ui.newHeader;if($panel.length&&!$panel.data("opened")){var $fields,$first=$panel.children().first(),$title=$header.find(".sp_wpcp-cloneable-value");$first.on("change keyup",(function(event){setTimeout((function(){var $group_title=$first.find(".sp_wpcp--active .sp-carousel-type");$title.text($group_title.html())}),300)}))}},icons:{header:"sp_wpcp-cloneable-header-icon fa fa-angle-right",activeHeader:"sp_wpcp-cloneable-header-icon fa fa-angle-down"},activate:function(event,ui){var $panel=ui.newPanel,$header=ui.newHeader;if($panel.length&&!$panel.data("opened")){var $fields,$first=$panel.children().first(),$title=$header.find(".sp_wpcp-cloneable-value");$first.on("change keyup",(function(event){setTimeout((function(){var $group_title=$first.find(".sp_wpcp--active .sp-carousel-type");$title.text($group_title.html())}),300)})),$panel.sp_wpcp_reload_script(),$panel.data("opened",!0),$panel.data("retry",!1)}else $panel.data("retry")&&($panel.sp_wpcp_reload_script_retry(),$panel.data("retry",!1))}}),$wrapper.sortable({axis:"y",handle:".sp_wpcp-cloneable-title,.sp_wpcp-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(event,ui){$wrapper.accordion({active:!1}),$wrapper.sortable("refreshPositions"),ui.item.children(".sp_wpcp-cloneable-content").data("retry",!0)},update:function(event,ui){SP_WPCP_Framework.helper.name_nested_replace($wrapper.children(".sp_wpcp-cloneable-item"),field_id),is_number&&update_title_numbers($wrapper)}}),$group.children(".sp_wpcp-cloneable-add").on("click",(function(e){e.preventDefault();var count=$wrapper.children(".sp_wpcp-cloneable-item").length;if($min.hide(),max&&count+1>max)$max.show();else{var $cloned_item=$hidden.sp_wpcp_clone(!0);$cloned_item.removeClass("sp_wpcp-cloneable-hidden"),$cloned_item.find(':input[name!="_pseudo"]').each((function(){this.name=this.name.replace("___","").replace(field_id+"[0]",field_id+"["+count+"]")})),$wrapper.append($cloned_item),$wrapper.accordion("refresh"),$wrapper.accordion({active:count}),is_number&&update_title_numbers($wrapper)}}));var event_clone=function(e){e.preventDefault();var count=$wrapper.children(".sp_wpcp-cloneable-item").length;if($min.hide(),max&&count+1>max)$max.show();else{var $this,$parent=$(this).parent().parent(),$cloned_helper=$parent.children(".sp_wpcp-cloneable-helper").sp_wpcp_clone(!0),$cloned_title=$parent.children(".sp_wpcp-cloneable-title").sp_wpcp_clone(),$cloned_content=$parent.children(".sp_wpcp-cloneable-content").sp_wpcp_clone(),$cloned_item=$('<div class="sp_wpcp-cloneable-item" />');$cloned_item.append($cloned_helper),$cloned_item.append($cloned_title),$cloned_item.append($cloned_content),$wrapper.children().eq($parent.index()).after($cloned_item),SP_WPCP_Framework.helper.name_nested_replace($wrapper.children(".sp_wpcp-cloneable-item"),field_id),$wrapper.accordion("refresh"),is_number&&update_title_numbers($wrapper)}};$wrapper.children(".sp_wpcp-cloneable-item").children(".sp_wpcp-cloneable-helper").on("click",".sp_wpcp-cloneable-clone",event_clone),$group.children(".sp_wpcp-cloneable-hidden").children(".sp_wpcp-cloneable-helper").on("click",".sp_wpcp-cloneable-clone",event_clone);var event_remove=function(e){e.preventDefault();var count=$wrapper.children(".sp_wpcp-cloneable-item").length;$max.hide(),$min.hide(),min&&count-1<min?$min.show():($(this).closest(".sp_wpcp-cloneable-item").remove(),SP_WPCP_Framework.helper.name_nested_replace($wrapper.children(".sp_wpcp-cloneable-item"),field_id),is_number&&update_title_numbers($wrapper))};$wrapper.children(".sp_wpcp-cloneable-item").children(".sp_wpcp-cloneable-helper").on("click",".sp_wpcp-cloneable-remove",event_remove),$group.children(".sp_wpcp-cloneable-hidden").children(".sp_wpcp-cloneable-helper").on("click",".sp_wpcp-cloneable-remove",event_remove),setTimeout((function(){$group.find(".sp_wpcp-cloneable-item:not(.sp_wpcp-cloneable-hidden)").each((function(){var $header,$title=$(this).find(".sp_wpcp-cloneable-title").find(".sp_wpcp-cloneable-value"),$group_title=$(this).find(".sp_wpcp--active .sp-carousel-type");$title.html($group_title.html())}))}),100)}))},$.fn.sp_wpcp_field_map=function(){return this.each((function(){if("undefined"!=typeof L){var $this=$(this),$map=$this.find(".sp_wpcp--map-osm"),$search_input=$this.find(".sp_wpcp--map-search input"),$latitude=$this.find(".sp_wpcp--latitude"),$longitude=$this.find(".sp_wpcp--longitude"),$zoom=$this.find(".sp_wpcp--zoom"),map_data=$map.data("map"),mapInit=L.map($map.get(0),map_data);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(mapInit);var mapMarker=L.marker(map_data.center,{draggable:!0}).addTo(mapInit),update_latlng=function(data){$latitude.val(data.lat),$longitude.val(data.lng),$zoom.val(mapInit.getZoom())};mapInit.on("click",(function(data){mapMarker.setLatLng(data.latlng),update_latlng(data.latlng)})),mapInit.on("zoom",(function(){update_latlng(mapMarker.getLatLng())})),mapMarker.on("drag",(function(){update_latlng(mapMarker.getLatLng())})),$search_input.length||($search_input=$('[data-depend-id="'+$this.find(".sp_wpcp--address-field").data("address-field")+'"]'));var cache={};$search_input.autocomplete({source:function(request,response){var term=request.term;term in cache?response(cache[term]):$.get("https://nominatim.openstreetmap.org/search",{format:"json",q:term},(function(results){var data;data=results.length?results.map((function(item){return{value:item.display_name,label:item.display_name,lat:item.lat,lon:item.lon}}),"json"):[{value:"no-data",label:"No Results."}],cache[term]=data,response(data)}))},select:function(event,ui){if("no-data"===ui.item.value)return!1;var latLng=L.latLng(ui.item.lat,ui.item.lon);mapInit.panTo(latLng),mapMarker.setLatLng(latLng),update_latlng(latLng)},create:function(event,ui){$(this).autocomplete("widget").addClass("sp_wpcp-map-ui-autocomplate")}});var input_update_latlng=function(){var latLng=L.latLng($latitude.val(),$longitude.val());mapInit.panTo(latLng),mapMarker.setLatLng(latLng)};$latitude.on("change",input_update_latlng),$longitude.on("change",input_update_latlng)}}))},$.fn.sp_wpcp_field_link=function(){return this.each((function(){var $this=$(this),$link=$this.find(".sp_wpcp--link"),$add=$this.find(".sp_wpcp--add"),$edit=$this.find(".sp_wpcp--edit"),$remove=$this.find(".sp_wpcp--remove"),$result=$this.find(".sp_wpcp--result"),uniqid=SP_WPCP_Framework.helper.uid("sp_wpcp-wplink-textarea-");$add.on("click",(function(e){e.preventDefault(),window.wpLink.open(uniqid)})),$edit.on("click",(function(e){e.preventDefault(),$add.trigger("click"),$("#wp-link-url").val($this.find(".sp_wpcp--url").val()),$("#wp-link-text").val($this.find(".sp_wpcp--text").val()),$("#wp-link-target").prop("checked","_blank"===$this.find(".sp_wpcp--target").val())})),$remove.on("click",(function(e){e.preventDefault(),$this.find(".sp_wpcp--url").val("").trigger("change"),$this.find(".sp_wpcp--text").val(""),$this.find(".sp_wpcp--target").val(""),$add.removeClass("hidden"),$edit.addClass("hidden"),$remove.addClass("hidden"),$result.parent().addClass("hidden")})),$link.attr("id",uniqid).on("change",(function(){var atts=window.wpLink.getAttrs(),href=atts.href,text=$("#wp-link-text").val(),target=atts.target?atts.target:"";$this.find(".sp_wpcp--url").val(href).trigger("change"),$this.find(".sp_wpcp--text").val(text),$this.find(".sp_wpcp--target").val(target),$result.html('{url:"'+href+'", text:"'+text+'", target:"'+target+'"}'),$add.addClass("hidden"),$edit.removeClass("hidden"),$remove.removeClass("hidden"),$result.parent().removeClass("hidden")}))}))},$.fn.sp_wpcp_field_media=function(){return this.each((function(){var $this=$(this),$upload_button=$this.find(".sp_wpcp--button"),$remove_button=$this.find(".sp_wpcp--remove"),$library=$upload_button.data("library")&&$upload_button.data("library").split(",")||"",$auto_attributes=!!$this.hasClass("sp_wpcp-assign-field-background")&&$this.closest(".sp_wpcp-field-background").find(".sp_wpcp--auto-attributes"),wp_media_frame;$upload_button.on("click",(function(e){e.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(wp_media_frame?wp_media_frame.open():((wp_media_frame=window.wp.media({library:{type:$library}})).on("select",(function(){var thumbnail,attributes=wp_media_frame.state().get("selection").first().attributes,preview_size=$upload_button.data("preview-size")||"thumbnail";$library.length&&-1===$library.indexOf(attributes.subtype)&&-1===$library.indexOf(attributes.type)||($this.find(".sp_wpcp--id").val(attributes.id),$this.find(".sp_wpcp--width").val(attributes.width),$this.find(".sp_wpcp--height").val(attributes.height),$this.find(".sp_wpcp--alt").val(attributes.alt),$this.find(".sp_wpcp--title").val(attributes.title),$this.find(".sp_wpcp--description").val(attributes.description),thumbnail=void 0!==attributes.sizes&&void 0!==attributes.sizes.thumbnail&&"thumbnail"===preview_size?attributes.sizes.thumbnail.url:void 0!==attributes.sizes&&void 0!==attributes.sizes.full?attributes.sizes.full.url:"image"===attributes.type?attributes.url:attributes.icon,$auto_attributes&&$auto_attributes.removeClass("sp_wpcp--attributes-hidden"),$remove_button.removeClass("hidden"),$this.find(".sp_wpcp--preview").removeClass("hidden"),$this.find(".sp_wpcp--src").attr("src",thumbnail),$this.find(".sp_wpcp--thumbnail").val(thumbnail),$this.find(".sp_wpcp--url").val(attributes.url).trigger("change"))})),wp_media_frame.open()))})),$remove_button.on("click",(function(e){e.preventDefault(),$auto_attributes&&$auto_attributes.addClass("sp_wpcp--attributes-hidden"),$remove_button.addClass("hidden"),$this.find("input").val(""),$this.find(".sp_wpcp--preview").addClass("hidden"),$this.find(".sp_wpcp--url").trigger("change")}))}))},$.fn.sp_wpcp_field_slider=function(){return this.each((function(){var $this=$(this),$input=$this.find("input"),$slider=$this.find(".sp_wpcp-slider-ui"),data=$input.data(),value=$input.val()||0;$slider.hasClass("ui-slider")&&$slider.empty(),$slider.slider({range:"min",value:value,min:data.min||0,max:data.max||100,step:data.step||1,slide:function(e,o){$input.val(o.value).trigger("change")}}),$input.on("keyup",(function(){$slider.slider("value",$input.val())}))}))},$.fn.sp_wpcp_field_sorter=function(){return this.each((function(){var $this=$(this),$enabled=$this.find(".sp_wpcp-enabled"),$has_disabled=$this.find(".sp_wpcp-disabled"),$disabled=!!$has_disabled.length&&$has_disabled;$enabled.sortable({connectWith:$disabled,placeholder:"ui-sortable-placeholder",update:function(event,ui){var $el=ui.item.find("input");ui.item.parent().hasClass("sp_wpcp-enabled")?$el.attr("name",$el.attr("name").replace("disabled","enabled")):$el.attr("name",$el.attr("name").replace("enabled","disabled"))}}),$disabled&&$disabled.sortable({connectWith:$enabled,placeholder:"ui-sortable-placeholder"})}))},$.fn.sp_wpcp_field_spinner=function(){return this.each((function(){var $this=$(this),$input=$this.find("input"),$inited=$this.find(".ui-button"),data=$input.data();$inited.length&&$inited.remove(),$input.spinner({min:data.min||0,max:data.max||100,step:data.step||1,create:function(event,ui){data.unit&&$input.after('<span class="ui-button sp_wpcp--unit">'+data.unit+"</span>")},spin:function(event,ui){$input.val(ui.value).trigger("change")}})}))},$.fn.sp_wpcp_field_switcher=function(){return this.each((function(){var $switcher=$(this).find(".sp_wpcp--switcher");$switcher.on("click",(function(){var value=0,$input=$switcher.find("input");$switcher.hasClass("sp_wpcp--active")?$switcher.removeClass("sp_wpcp--active"):(value=1,$switcher.addClass("sp_wpcp--active")),$input.val(value).trigger("change")}))}))},$.fn.sp_wpcp_field_typography=function(){return this.each((function(){var base=this,$this=$(this),loaded_fonts=[],webfonts=sp_wpcp_typography_json.webfonts,googlestyles=sp_wpcp_typography_json.googlestyles,defaultstyles=sp_wpcp_typography_json.defaultstyles;base.sanitize_subset=function(subset){return subset=(subset=subset.replace("-ext"," Extended")).charAt(0).toUpperCase()+subset.slice(1)},base.sanitize_style=function(style){return googlestyles[style]?googlestyles[style]:style},base.load_google_font=function(font_family,weight,style){font_family&&"object"==typeof WebFont&&(weight=weight?weight.replace("normal",""):"",style=style?style.replace("normal",""):"",(weight||style)&&(font_family=font_family+":"+weight+style),-1===loaded_fonts.indexOf(font_family)&&WebFont.load({google:{families:[font_family]}}),loaded_fonts.push(font_family))},base.append_select_options=function($select,options,condition,type,is_multi){$select.find("option").not(":first").remove();var opts="";$.each(options,(function(key,value){var selected,name=value;selected=is_multi?condition&&-1!==condition.indexOf(value)?" selected":"":condition&&condition===value?" selected":"","subset"===type?name=base.sanitize_subset(value):"style"===type&&(name=base.sanitize_style(value)),opts+='<option value="'+value+'"'+selected+">"+name+"</option>"})),$select.append(opts).trigger("sp_wpcp.change").trigger("chosen:updated")},base.init=function(){var selected_styles=[],$typography=$this.find(".sp_wpcp--typography"),$type=$this.find(".sp_wpcp--type"),$styles=$this.find(".sp_wpcp--block-font-style"),unit=$typography.data("unit"),line_height_unit=$typography.data("line-height-unit"),exclude_fonts=$typography.data("exclude")?$typography.data("exclude").split(","):[],$chosen_selects;$this.find(".sp_wpcp--chosen").length&&$this.find("select").each((function(){var $chosen_select=$(this),$chosen_inited=$chosen_select.parent().find(".chosen-container");$chosen_inited.length&&$chosen_inited.remove(),$chosen_select.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})}));var $font_family_select=$this.find(".sp_wpcp--font-family"),first_font_family=$font_family_select.val();$font_family_select.find("option").not(":first-child").remove();var opts="";$.each(webfonts,(function(type,group){exclude_fonts&&-1!==exclude_fonts.indexOf(type)||(opts+='<optgroup label="'+group.label+'">',$.each(group.fonts,(function(key,value){var selected;opts+='<option value="'+(value="object"==typeof value?key:value)+'" data-type="'+type+'"'+(value===first_font_family?" selected":"")+">"+value+"</option>"})),opts+="</optgroup>")})),$font_family_select.append(opts).trigger("chosen:updated");var $font_style_block=$this.find(".sp_wpcp--block-font-style");if($font_style_block.length){var $font_style_select=$this.find(".sp_wpcp--font-style-select"),first_style_value=$font_style_select.val()?$font_style_select.val().replace(/normal/g,""):"";$font_style_select.on("change sp_wpcp.change",(function(event){var style_value=$font_style_select.val();!style_value&&selected_styles&&-1===selected_styles.indexOf("normal")&&(style_value=selected_styles[0]);var font_normal=style_value&&"italic"!==style_value&&"normal"===style_value?"normal":"",font_weight=style_value&&"italic"!==style_value&&"normal"!==style_value?style_value.replace("italic",""):font_normal,font_style=style_value&&"italic"===style_value.substr(-6)?"italic":"";$this.find(".sp_wpcp--font-weight").val(font_weight),$this.find(".sp_wpcp--font-style").val(font_style)}));var $extra_font_style_block=$this.find(".sp_wpcp--block-extra-styles");if($extra_font_style_block.length)var $extra_font_style_select=$this.find(".sp_wpcp--extra-styles"),first_extra_style_value=$extra_font_style_select.val()}var $subset_block=$this.find(".sp_wpcp--block-subset");if($subset_block.length)var $subset_select=$this.find(".sp_wpcp--subset"),first_subset_select_value=$subset_select.val(),subset_multi_select=$subset_select.data("multiple")||!1;var $backup_font_family_block=$this.find(".sp_wpcp--block-backup-font-family");$font_family_select.on("change sp_wpcp.change",(function(event){$subset_block.length&&$subset_block.addClass("hidden"),$extra_font_style_block.length&&$extra_font_style_block.addClass("hidden"),$backup_font_family_block.length&&$backup_font_family_block.addClass("hidden");var $selected=$font_family_select.find(":selected"),value=$selected.val(),type=$selected.data("type");if(type&&value){if("google"!==type&&"custom"!==type||!$backup_font_family_block.length||$backup_font_family_block.removeClass("hidden"),$font_style_block.length){var styles=defaultstyles;"google"===type&&webfonts[type].fonts[value][0]?styles=webfonts[type].fonts[value][0]:"custom"===type&&webfonts[type].fonts[value]&&(styles=webfonts[type].fonts[value]),selected_styles=styles;var set_auto_style=-1!==styles.indexOf("normal")?"normal":styles[0],set_style_value=first_style_value&&-1!==styles.indexOf(first_style_value)?first_style_value:set_auto_style;base.append_select_options($font_style_select,styles,set_style_value,"style"),first_style_value=!1,$font_style_block.removeClass("hidden"),"google"===type&&$extra_font_style_block.length&&styles.length>1&&(base.append_select_options($extra_font_style_select,styles,first_extra_style_value,"style",!0),first_extra_style_value=!1,$extra_font_style_block.removeClass("hidden"))}if("google"===type&&$subset_block.length&&webfonts[type].fonts[value][1]){var subsets=webfonts[type].fonts[value][1],set_auto_subset=subsets.length<2&&"latin"!==subsets[0]?subsets[0]:"",set_subset_value=first_subset_select_value&&-1!==subsets.indexOf(first_subset_select_value)?first_subset_select_value:set_auto_subset;set_subset_value=subset_multi_select&&first_subset_select_value?first_subset_select_value:set_subset_value,base.append_select_options($subset_select,subsets,set_subset_value,"subset",subset_multi_select),first_subset_select_value=!1,$subset_block.removeClass("hidden")}}else $styles.find(":input").val(""),$subset_block.length&&($subset_select.find("option").not(":first-child").remove(),$subset_select.trigger("chosen:updated")),$font_style_block.length&&($font_style_select.find("option").not(":first-child").remove(),$font_style_select.trigger("chosen:updated"));$type.val(type)})).trigger("sp_wpcp.change");var $preview_block=$this.find(".sp_wpcp--block-preview");if($preview_block.length){var $preview=$this.find(".sp_wpcp--preview");$this.on("change",SP_WPCP_Framework.helper.debounce((function(event){$preview_block.removeClass("hidden");var font_family=$font_family_select.val(),font_weight=$this.find(".sp_wpcp--font-weight").val(),font_style=$this.find(".sp_wpcp--font-style").val(),font_size=$this.find(".sp_wpcp--font-size").val(),font_variant=$this.find(".sp_wpcp--font-variant").val(),line_height=$this.find(".sp_wpcp--line-height").val(),text_align=$this.find(".sp_wpcp--text-align").val(),text_transform=$this.find(".sp_wpcp--text-transform").val(),text_decoration=$this.find(".sp_wpcp--text-decoration").val(),text_color=$this.find(".sp_wpcp--color").val(),word_spacing=$this.find(".sp_wpcp--word-spacing").val(),letter_spacing=$this.find(".sp_wpcp--letter-spacing").val(),custom_style=$this.find(".sp_wpcp--custom-style").val(),type;"google"===$this.find(".sp_wpcp--type").val()&&base.load_google_font(font_family,font_weight,font_style);var properties={};font_family&&(properties.fontFamily=font_family),font_weight&&(properties.fontWeight=font_weight),font_style&&(properties.fontStyle=font_style),font_variant&&(properties.fontVariant=font_variant),font_size&&(properties.fontSize=font_size+unit),line_height&&(properties.lineHeight=line_height+line_height_unit),letter_spacing&&(properties.letterSpacing=letter_spacing+unit),word_spacing&&(properties.wordSpacing=word_spacing+unit),text_align&&(properties.textAlign=text_align),text_transform&&(properties.textTransform=text_transform),text_decoration&&(properties.textDecoration=text_decoration),text_color&&(properties.color=text_color),$preview.removeAttr("style"),custom_style&&$preview.attr("style",custom_style),$preview.css(properties)}),100)),$preview_block.on("click",(function(){$preview.toggleClass("sp_wpcp--black-background");var $toggle=$preview_block.find(".sp_wpcp--toggle");$toggle.hasClass("fa-toggle-off")?$toggle.removeClass("fa-toggle-off").addClass("fa-toggle-on"):$toggle.removeClass("fa-toggle-on").addClass("fa-toggle-off")})),$preview_block.hasClass("hidden")||$this.trigger("change")}},base.init()}))},$.fn.sp_wpcp_field_upload=function(){return this.each((function(){var $this=$(this),$input=$this.find("input"),$upload_button=$this.find(".sp_wpcp--button"),$remove_button=$this.find(".sp_wpcp--remove"),$preview_wrap=$this.find(".sp_wpcp--preview"),$preview_src=$this.find(".sp_wpcp--src"),$library=$upload_button.data("library")&&$upload_button.data("library").split(",")||"",wp_media_frame;$upload_button.on("click",(function(e){e.preventDefault(),void 0!==window.wp&&window.wp.media&&window.wp.media.gallery&&(wp_media_frame?wp_media_frame.open():((wp_media_frame=window.wp.media({library:{type:$library}})).on("select",(function(){var src,attributes=wp_media_frame.state().get("selection").first().attributes;$library.length&&-1===$library.indexOf(attributes.subtype)&&-1===$library.indexOf(attributes.type)||$input.val(attributes.url).trigger("change")})),wp_media_frame.open()))})),$remove_button.on("click",(function(e){e.preventDefault(),$input.val("").trigger("change")})),$input.on("change",(function(e){var $value=$input.val();$value?$remove_button.removeClass("hidden"):$remove_button.addClass("hidden"),$preview_wrap.length&&(-1!==$.inArray($value.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?($preview_wrap.removeClass("hidden"),$preview_src.attr("src",$value)):$preview_wrap.addClass("hidden"),WPCarouselSlidesUpdate(),wpcp_image_edit.init())}))}))},$.fn.sp_wpcp_field_wp_editor=function(){return this.each((function(){if(void 0!==window.wp.editor&&void 0!==window.tinyMCEPreInit&&void 0!==window.tinyMCEPreInit.mceInit.sp_wpcp_wp_editor){var $this=$(this),$editor=$this.find(".sp_wpcp-wp-editor"),$textarea=$this.find("textarea"),$has_wp_editor;($this.find(".wp-editor-wrap").length||$this.find(".mce-container").length)&&($editor.empty(),$editor.append($textarea),$textarea.css("display",""));var uid=SP_WPCP_Framework.helper.uid("sp_wpcp-editor-");$textarea.attr("id",uid);var default_editor_settings={tinymce:window.tinyMCEPreInit.mceInit.sp_wpcp_wp_editor,quicktags:window.tinyMCEPreInit.qtInit.sp_wpcp_wp_editor},field_editor_settings=$editor.data("editor-settings"),wpEditor=wp.oldEditor?wp.oldEditor:wp.editor;wpEditor&&wpEditor.hasOwnProperty("autop")&&(wp.editor.autop=wpEditor.autop,wp.editor.removep=wpEditor.removep,wp.editor.initialize=wpEditor.initialize);var editor_on_change=function(editor){editor.on("change keyup",(function(){var value=field_editor_settings.wpautop?editor.getContent():wp.editor.removep(editor.getContent());$textarea.val(value).trigger("change")}))};default_editor_settings.tinymce=$.extend({},default_editor_settings.tinymce,{selector:"#"+uid,setup:editor_on_change}),!1===field_editor_settings.tinymce&&(default_editor_settings.tinymce=!1,$editor.addClass("sp_wpcp-no-tinymce")),!1===field_editor_settings.quicktags&&(default_editor_settings.quicktags=!1,$editor.addClass("sp_wpcp-no-quicktags"));var interval=setInterval((function(){$this.is(":visible")&&(window.wp.editor.initialize(uid,default_editor_settings),clearInterval(interval))}));if(field_editor_settings.media_buttons&&window.sp_wpcp_media_buttons){var $editor_buttons=$editor.find(".wp-media-buttons");if($editor_buttons.length)$editor_buttons.find(".sp_wpcp-shortcode-button").data("editor-id",uid);else{var $media_buttons=$(window.sp_wpcp_media_buttons);$media_buttons.find(".sp_wpcp-shortcode-button").data("editor-id",uid),$editor.prepend($media_buttons)}}}}))},$.fn.sp_wpcp_field_tabbed=function(){return this.each((function(){var $this=$(this),$links=$this.find(".sp_wpcp-tabbed-nav a"),$sections=$this.find(".sp_wpcp-tabbed-section");$links.on("click",(function(e){e.preventDefault();var $link=$(this),index=$link.index(),$section=$sections.eq(index);SP_WPCP_Framework.helper.set_cookie("activeTabIndex",index),$link.addClass("sp_wpcp-tabbed-active").siblings().removeClass("sp_wpcp-tabbed-active"),$section.sp_wpcp_reload_script(),$section.removeClass("hidden").siblings().addClass("hidden")}));var activeTabIndex=SP_WPCP_Framework.helper.get_cookie("activeTabIndex");null!==activeTabIndex?$links.eq(activeTabIndex).trigger("click"):$links.first().trigger("click")}))},$.fn.sp_wpcp_confirm=function(){return this.each((function(){$(this).on("click",(function(e){var confirm_text=$(this).data("confirm")||window.sp_wpcp_vars.i18n.confirm,confirm_answer;if(!confirm(confirm_text))return e.preventDefault(),!1;SP_WPCP_Framework.vars.is_confirm=!0,SP_WPCP_Framework.vars.form_modified=!1,$(".sp-wpcp-options #sp_wpcp-form").trigger("change"),setTimeout((function(){$(".sp_wpcp-field.sp_wpcp-field-insta_group .sp_wpcp-cloneable-item:not(.sp_wpcp-cloneable-hidden)").length>0?$(".sp_wpcp-field.sp_wpcp-field-insta_group").show():$(".sp_wpcp-field.sp_wpcp-field-insta_group").hide()}),300)}))}))},$.fn.serializeObject=function(){var obj={};return $.each(this.serializeArray(),(function(i,o){var n=o.name,v=o.value;obj[n]=void 0===obj[n]?v:$.isArray(obj[n])?obj[n].concat(v):[obj[n],v]})),obj},$.fn.sp_wpcp_save=function(){return this.each((function(){var $this=$(this),$buttons=$(".sp_wpcp-save"),$panel=$(".sp_wpcp-options"),flooding=!1,timeout;$this.on("click",(function(e){if(!flooding){var $text=$this.data("save"),$value=$this.val();if($buttons.attr("value",$text),$this.hasClass("sp_wpcp-save-ajax")){e.preventDefault(),$panel.addClass("sp_wpcp-saving"),$buttons.prop("disabled",!0);var wpcp_options_data=$("#sp_wpcp-form").serializeJSONSP_WPCP_Framework();wpcp_admin.re_serialize_json&&(wpcp_options_data=JSON.stringify($("#sp_wpcp-form").serializeJSONSP_WPCP_Framework())),window.wp.ajax.post("sp_wpcp_"+$panel.data("unique")+"_ajax_save",{data:wpcp_options_data}).done((function(response){if($(".sp_wpcp-error").remove(),Object.keys(response.errors).length){var error_icon='<i class="sp_wpcp-label-error sp_wpcp-error">!</i>';$.each(response.errors,(function(key,error_message){var $field=$('[data-depend-id="'+key+'"]'),$link=$('a[href="#tab='+$field.closest(".sp_wpcp-section").data("section-id")+'"]'),$tab=$link.closest(".sp_wpcp-tab-item");$field.closest(".sp_wpcp-fieldset").append('<p class="sp_wpcp-error sp_wpcp-error-text">'+error_message+"</p>"),$link.find(".sp_wpcp-error").length||$link.append(error_icon),$tab.find(".sp_wpcp-arrow .sp_wpcp-error").length||$tab.find(".sp_wpcp-arrow").append(error_icon)}))}$panel.removeClass("sp_wpcp-saving"),$buttons.prop("disabled",!1).attr("value",$value),flooding=!1,SP_WPCP_Framework.vars.form_modified=!1,SP_WPCP_Framework.vars.$form_warning.hide(),clearTimeout(timeout);var $result_success=$(".sp_wpcp-form-success");$result_success.empty().append(response.notice).fadeIn("fast",(function(){timeout=setTimeout((function(){$result_success.fadeOut("fast")}),1e3)}))})).fail((function(response){alert(response.error)}))}else SP_WPCP_Framework.vars.form_modified=!1}flooding=!0}))}))},$.fn.sp_wpcp_options=function(){return this.each((function(){var $this=$(this),$content=$this.find(".sp_wpcp-content"),$form_success=$this.find(".sp_wpcp-form-success"),$form_warning=$this.find(".sp_wpcp-form-warning"),$save_button=$this.find(".sp_wpcp-header .sp_wpcp-save");SP_WPCP_Framework.vars.$form_warning=$form_warning,$form_warning.length&&(window.onbeforeunload=function(){return!!SP_WPCP_Framework.vars.form_modified||void 0},$content.on("change keypress",":input",(function(){SP_WPCP_Framework.vars.form_modified||($form_success.hide(),$form_warning.fadeIn("fast"),SP_WPCP_Framework.vars.form_modified=!0)}))),$form_success.hasClass("sp_wpcp-form-show")&&setTimeout((function(){$form_success.fadeOut("fast")}),1e3),$(document).on("keydown",(function(event){if((event.ctrlKey||event.metaKey)&&83===event.which)return $save_button.trigger("click"),event.preventDefault(),!1}))}))},$.fn.sp_wpcp_taxonomy=function(){return this.each((function(){var $this=$(this),$form=$this.parents("form");if("addtag"===$form.attr("id")){var $submit=$form.find("#submit"),$cloned=$this.find(".sp_wpcp-field").sp_wpcp_clone();$submit.on("click",(function(){$form.find(".form-required").hasClass("form-invalid")||($this.data("inited",!1),$this.empty(),$this.html($cloned),$cloned=$cloned.sp_wpcp_clone(),$this.sp_wpcp_reload_script())}))}}))},$.fn.sp_wpcp_shortcode=function(){var base=this;return base.shortcode_parse=function(serialize,key){var shortcode="";return $.each(serialize,(function(shortcode_key,shortcode_values){shortcode+="["+(key=key||shortcode_key),$.each(shortcode_values,(function(shortcode_tag,shortcode_value){"content"===shortcode_tag?(shortcode+="]",shortcode+=shortcode_value,shortcode+="[/"+key):shortcode+=base.shortcode_tags(shortcode_tag,shortcode_value)})),shortcode+="]"})),shortcode},base.shortcode_tags=function(shortcode_tag,shortcode_value){var shortcode="";return""!==shortcode_value&&("object"!=typeof shortcode_value||$.isArray(shortcode_value)?shortcode+=" "+shortcode_tag.replace("-","_")+'="'+shortcode_value.toString()+'"':$.each(shortcode_value,(function(sub_shortcode_tag,sub_shortcode_value){switch(sub_shortcode_tag){case"background-image":sub_shortcode_value=sub_shortcode_value.url?sub_shortcode_value.url:""}""!==sub_shortcode_value&&(shortcode+=" "+sub_shortcode_tag.replace("-","_")+'="'+sub_shortcode_value.toString()+'"')}))),shortcode},base.insertAtChars=function(_this,currentValue){var obj=void 0!==_this[0].name?_this[0]:_this;return obj.value.length&&void 0!==obj.selectionStart?(obj.trigger("focus"),obj.value.substring(0,obj.selectionStart)+currentValue+obj.value.substring(obj.selectionEnd,obj.value.length)):(obj.trigger("focus"),currentValue)},base.send_to_editor=function(html,editor_id){var tinymce_editor;if("undefined"!=typeof tinymce&&(tinymce_editor=tinymce.get(editor_id)),tinymce_editor&&!tinymce_editor.isHidden())tinymce_editor.execCommand("mceInsertContent",!1,html);else{var $editor=$("#"+editor_id);$editor.val(base.insertAtChars($editor,html)).trigger("change")}},this.each((function(){var $modal=$(this),$load=$modal.find(".sp_wpcp-modal-load"),$content=$modal.find(".sp_wpcp-modal-content"),$insert=$modal.find(".sp_wpcp-modal-insert"),$loading=$modal.find(".sp_wpcp-modal-loading"),$select=$modal.find("select"),modal_id=$modal.data("modal-id"),nonce=$modal.data("nonce"),editor_id,target_id,gutenberg_id,sc_key,sc_name,sc_view,sc_group,$cloned,$button;$(document).on("click",'.sp_wpcp-shortcode-button[data-modal-id="'+modal_id+'"]',(function(e){e.preventDefault(),$button=$(this),editor_id=$button.data("editor-id")||!1,target_id=$button.data("target-id")||!1,gutenberg_id=$button.data("gutenberg-id")||!1,$modal.removeClass("hidden"),$modal.hasClass("sp_wpcp-shortcode-single")&&void 0===sc_name&&$select.trigger("change")})),$select.on("change",(function(){var $option=$(this),$selected=$option.find(":selected");sc_key=$option.val(),sc_name=$selected.data("shortcode"),sc_view=$selected.data("view")||"normal",sc_group=$selected.data("group")||sc_name,$load.empty(),sc_key?($loading.show(),window.wp.ajax.post("sp_wpcp-get-shortcode-"+modal_id,{shortcode_key:sc_key,nonce:nonce}).done((function(response){$loading.hide();var $appended=$(response.content).appendTo($load);$insert.parent().removeClass("hidden"),$cloned=$appended.find(".sp_wpcp--repeat-shortcode").sp_wpcp_clone(),$appended.sp_wpcp_reload_script(),$appended.find(".sp_wpcp-fields").sp_wpcp_reload_script()}))):$insert.parent().addClass("hidden")})),$insert.on("click",(function(e){if(e.preventDefault(),!$insert.prop("disabled")&&!$insert.attr("disabled")){var shortcode="",serialize=$modal.find(".sp_wpcp-field:not(.sp_wpcp-depend-on)").find(":input:not(.ignore)").serializeObjectSP_WPCP_Framework();switch(sc_view){case"contents":var contentsObj=sc_name?serialize[sc_name]:serialize;$.each(contentsObj,(function(sc_key,sc_value){var sc_tag=sc_name||sc_key;shortcode+="["+sc_tag+"]"+sc_value+"[/"+sc_tag+"]"}));break;case"group":shortcode+="["+sc_name,$.each(serialize[sc_name],(function(sc_key,sc_value){shortcode+=base.shortcode_tags(sc_key,sc_value)})),shortcode+="]",shortcode+=base.shortcode_parse(serialize[sc_group],sc_group),shortcode+="[/"+sc_name+"]";break;case"repeater":shortcode+=base.shortcode_parse(serialize[sc_group],sc_group);break;default:shortcode+=base.shortcode_parse(serialize)}if(shortcode=""===shortcode?"["+sc_name+"]":shortcode,gutenberg_id){var content=window.sp_wpcp_gutenberg_props.attributes.hasOwnProperty("shortcode")?window.sp_wpcp_gutenberg_props.attributes.shortcode:"";window.sp_wpcp_gutenberg_props.setAttributes({shortcode:content+shortcode})}else if(editor_id)base.send_to_editor(shortcode,editor_id);else{var $textarea=target_id?$(target_id):$button.parent().find("textarea");$textarea.val(base.insertAtChars($textarea,shortcode)).trigger("change")}$modal.addClass("hidden")}})),$modal.on("click",".sp_wpcp--repeat-button",(function(e){e.preventDefault();var $repeatable=$modal.find(".sp_wpcp--repeatable"),$new_clone=$cloned.sp_wpcp_clone(),$remove_btn=$new_clone.find(".sp_wpcp-repeat-remove"),$appended=$new_clone.appendTo($repeatable);$new_clone.find(".sp_wpcp-fields").sp_wpcp_reload_script(),SP_WPCP_Framework.helper.name_nested_replace($modal.find(".sp_wpcp--repeat-shortcode"),sc_group),$remove_btn.on("click",(function(){$new_clone.remove(),SP_WPCP_Framework.helper.name_nested_replace($modal.find(".sp_wpcp--repeat-shortcode"),sc_group)}))})),$modal.on("click",".sp_wpcp-modal-close, .sp_wpcp-modal-overlay",(function(){$modal.addClass("hidden")}))}))},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;i>=0;i--)hex="0"+hex;return"#"+hex}),SP_WPCP_Framework.funcs.parse_color=function(color){var value=color.replace(/\s+/g,""),trans=-1!==value.indexOf("rgba")?parseFloat(100*value.replace(/^.*,(.+)\)/,"$1")):100,rgba;return{value:value,transparent:trans,rgba:trans<100}},$.fn.sp_wpcp_color=function(){const set_custom_img_color=(ui_color_value,$image_color)=>{const custom_img_color=ui_color_value;if(custom_img_color&&"transparent"!==custom_img_color){let rgb="",custom_color=custom_img_color;if(rgb=-1!==custom_color.indexOf("rgb")?custom_color.replace(")","").replace(/^\D+/g,"").split(","):hexToRgb(custom_color),rgb.length<3)return;const color=new CustomColor(rgb[0],rgb[1],rgb[2],rgb[3]),solver=new Solver(color),result=solver.solve(),filter_value=result.filter;$image_color.attr("value",filter_value)}};return this.each((function(){var $input=$(this),$image_color=$input.siblings(".sp_wpcp-image-color"),picker_color=SP_WPCP_Framework.funcs.parse_color($input.val()),palette_color=!window.sp_wpcp_vars.color_palette.length||window.sp_wpcp_vars.color_palette,$container;$input.hasClass("wp-color-picker")&&$input.closest(".wp-picker-container").after($input).remove(),$image_color.length&&set_custom_img_color(picker_color.value,$image_color),$input.wpColorPicker({palettes:palette_color,change:function(event,ui){var ui_color_value=ui.color.toString();$container.removeClass("sp_wpcp--transparent-active"),$container.find(".sp_wpcp--transparent-offset").css("background-color",ui_color_value),$input.val(ui_color_value).trigger("change"),$image_color.length&&set_custom_img_color(ui_color_value,$image_color)},create:function(){$container=$input.closest(".wp-picker-container");var a8cIris=$input.data("a8cIris"),$transparent_wrap=$('<div class="sp_wpcp--transparent-wrap"><div class="sp_wpcp--transparent-slider"></div><div class="sp_wpcp--transparent-offset"></div><div class="sp_wpcp--transparent-text"></div><div class="sp_wpcp--transparent-button">transparent <i class="fa fa-toggle-off"></i></div></div>').appendTo($container.find(".wp-picker-holder")),$transparent_slider=$transparent_wrap.find(".sp_wpcp--transparent-slider"),$transparent_text=$transparent_wrap.find(".sp_wpcp--transparent-text"),$transparent_offset=$transparent_wrap.find(".sp_wpcp--transparent-offset"),$transparent_button=$transparent_wrap.find(".sp_wpcp--transparent-button");"transparent"===$input.val()&&$container.addClass("sp_wpcp--transparent-active"),$transparent_button.on("click",(function(){"transparent"!==$input.val()?($input.val("transparent").trigger("change").removeClass("iris-error"),$container.addClass("sp_wpcp--transparent-active")):($input.val(a8cIris._color.toString()).trigger("change"),$container.removeClass("sp_wpcp--transparent-active"))})),$transparent_slider.slider({value:picker_color.transparent,step:1,min:0,max:100,slide:function(event,ui){var slide_value=parseFloat(ui.value/100);a8cIris._color._alpha=slide_value,$input.wpColorPicker("color",a8cIris._color.toString()),$transparent_text.text(1===slide_value||0===slide_value?"":slide_value)},create:function(){var slide_value=parseFloat(picker_color.transparent/100),text_value=slide_value<1?slide_value:"";$transparent_text.text(text_value),$transparent_offset.css("background-color",picker_color.value),$container.on("click",".wp-picker-clear",(function(){a8cIris._color._alpha=1,$transparent_text.text(""),$transparent_slider.slider("option","value",100),$container.removeClass("sp_wpcp--transparent-active"),$input.trigger("change")})),$container.on("click",".wp-picker-default",(function(){var default_color=SP_WPCP_Framework.funcs.parse_color($input.data("default-color")),default_value=parseFloat(default_color.transparent/100),default_text=default_value<1?default_value:"";a8cIris._color._alpha=default_value,$transparent_text.text(default_text),$transparent_slider.slider("option","value",default_color.transparent),"transparent"===default_color.value&&($input.removeClass("iris-error"),$container.addClass("sp_wpcp--transparent-active"))}))}})}})}))},$.fn.sp_wpcp_chosen=function(){return this.each((function(){var $this=$(this),$inited=$this.parent().find(".chosen-container"),is_sortable=$this.hasClass("sp_wpcp-chosen-sortable")||!1,is_ajax=$this.hasClass("sp_wpcp-chosen-ajax")||!1,is_multiple=$this.attr("multiple")||!1,set_width=is_multiple?"100%":"auto",set_options=$.extend({allow_single_deselect:!0,disable_search_threshold:10,width:set_width,no_results_text:window.sp_wpcp_vars.i18n.no_results_text},$this.data("chosen-settings"));if($inited.length&&$inited.remove(),is_ajax){var set_ajax_options=$.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:window.sp_wpcp_vars.i18n.typing_text,searching_text:window.sp_wpcp_vars.i18n.searching_text,no_results_text:window.sp_wpcp_vars.i18n.no_results_text},$this.data("chosen-settings"));$this.SP_WPCP_FrameworkAjaxChosen(set_ajax_options)}else $this.chosen(set_options);if(is_multiple){var $hidden_select=$this.parent().find(".sp_wpcp-hide-select"),$hidden_value=$hidden_select.val()||[];$this.on("change",(function(obj,result){result&&result.selected?$hidden_select.append('<option value="'+result.selected+'" selected="selected">'+result.selected+"</option>"):result&&result.deselected&&$hidden_select.find('option[value="'+result.deselected+'"]').remove(),void 0!==window.wp.customize&&0===$hidden_select.children().length&&$hidden_select.data("customize-setting-link")&&window.wp.customize.control($hidden_select.data("customize-setting-link")).setting.set(""),$hidden_select.trigger("change")})),$this.SP_WPCP_FrameworkChosenOrder($hidden_value,!0)}if(is_sortable){var $chosen_container,$chosen_choices=$this.parent().find(".chosen-container").find(".chosen-choices");$chosen_choices.on("mousedown",(function(event){$(event.target).is("span")&&event.stopPropagation()})),$chosen_choices.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,ui){ui.placeholder.width(ui.item.innerWidth()),ui.placeholder.height(ui.item.innerHeight())},update:function(e,ui){var select_options="",chosen_object=$this.data("chosen"),$prev_select=$this.parent().find(".sp_wpcp-hide-select");$chosen_choices.find(".search-choice-close").each((function(){var option_array_index=$(this).data("option-array-index");$.each(chosen_object.results_data,(function(index,data){data.array_index===option_array_index&&(select_options+='<option value="'+data.value+'" selected>'+data.value+"</option>")}))})),$prev_select.children().remove(),$prev_select.append(select_options),$prev_select.trigger("change")}})}}))},$.fn.sp_wpcp_checkbox=function(){return this.each((function(){var $this=$(this),$input=$this.find(".sp_wpcp--input"),$checkbox=$this.find(".sp_wpcp--checkbox");$checkbox.on("click",(function(){$input.val(Number($checkbox.prop("checked"))).trigger("change")}))}))},$.fn.sp_wpcp_siblings=function(){return this.each((function(){var $this=$(this),$siblings=$this.find(".sp_wpcp--sibling"),multiple=$this.data("multiple")||!1;$siblings.on("click",(function(){var $sibling=$(this);multiple?$sibling.hasClass("sp_wpcp--active")?($sibling.removeClass("sp_wpcp--active"),$sibling.find("input").prop("checked",!1).trigger("change")):($sibling.addClass("sp_wpcp--active"),$sibling.find("input").prop("checked",!0).trigger("change")):($this.find("input").prop("checked",!1),$sibling.find("input").prop("checked",!0).trigger("change"),$sibling.addClass("sp_wpcp--active").siblings().removeClass("sp_wpcp--active"))}))}))},$.fn.sp_wpcp_help=function(){return this.each((function(){var $this=$(this),$tooltip,offset_left,$class="";$this.on({mouseenter:function(){$this.find(".sp_wpcp-support").length>0&&($class="support-tooltip");var help_text=$this.find(".sp_wpcp-help-text").html();$tooltip=$(".sp_wpcp-tooltip").length>0?$(".sp_wpcp-tooltip").html(help_text):$('<div class="sp_wpcp-tooltip '+$class+'"></div>').html(help_text).appendTo("body"),SP_WPCP_Framework.vars.is_rtl,offset_left=$this.offset().left+36;var $top=$this.offset().top-($tooltip.outerHeight()/2-14);$this.find(".sp_wpcp-support").length>0&&($top=$this.offset().top+52,offset_left=$this.offset().left-212),$tooltip.css({top:$top,left:offset_left,textAlign:"left"})},mouseleave:function(){$tooltip.is(":hover")||$tooltip.remove()}}),$("body").on("mouseleave",".sp_wpcp-tooltip",(function(){void 0!==$tooltip&&$tooltip.remove()}))}))},SP_WPCP_Framework.vars.$window.on("resize sp_wpcp.resize",SP_WPCP_Framework.helper.debounce((function(event){var window_width;(navigator.userAgent.indexOf("AppleWebKit/")>-1?SP_WPCP_Framework.vars.$window.width():window.innerWidth)<=782&&!SP_WPCP_Framework.vars.onloaded&&($(".sp_wpcp-section").sp_wpcp_reload_script(),SP_WPCP_Framework.vars.onloaded=!0)}),200)).trigger("sp_wpcp.resize"),$.fn.sp_wpcp_widgets=function(){this.length&&($(document).on("widget-added widget-updated",(function(event,$widget){$widget.find(".sp_wpcp-fields").sp_wpcp_reload_script()})),$(".widgets-sortables, .control-section-sidebar").on("sortstop",(function(event,ui){ui.item.find(".sp_wpcp-fields").sp_wpcp_reload_script_retry()})),$(document).on("click",".widget-top",(function(event){$(this).parent().find(".sp_wpcp-fields").sp_wpcp_reload_script()})))},$.fn.sp_wpcp_nav_menu=function(){return this.each((function(){var $navmenu=$(this);$navmenu.on("click","a.item-edit",(function(){$(this).closest("li.menu-item").find(".sp_wpcp-fields").sp_wpcp_reload_script()})),$navmenu.on("sortstop",(function(event,ui){ui.item.find(".sp_wpcp-fields").sp_wpcp_reload_script_retry()}))}))},$.fn.sp_wpcp_reload_script_retry=function(){return this.each((function(){var $this=$(this);$this.data("inited")&&$this.children(".sp_wpcp-field-wp_editor").sp_wpcp_field_wp_editor()}))},$.fn.sp_wpcp_reload_script=function(options){var settings=$.extend({dependency:!0},options);return this.each((function(){var $this=$(this);$this.data("inited")||($this.children(".sp_wpcp-field-accordion").sp_wpcp_field_accordion(),$this.children(".sp_wpcp-field-background").sp_wpcp_field_background(),$this.children(".sp_wpcp-field-code_editor").sp_wpcp_field_code_editor(),$this.children(".sp_wpcp-field-datetime").sp_wpcp_field_datetime(),$this.children(".sp_wpcp-field-fieldset").sp_wpcp_field_fieldset(),$this.children(".sp_wpcp-field-fieldset_tx").sp_wpcp_field_fieldset(),$this.children(".sp_wpcp-field-fieldset_cpt").sp_wpcp_field_fieldset(),$this.children(".sp_wpcp-field-gallery").sp_wpcp_field_gallery(),$this.children(".sp_wpcp-field-insta_group").sp_wpcp_field_group(),$this.children(".sp_wpcp-field-group").sp_wpcp_field_group(),$this.children(".sp_wpcp-field-link").sp_wpcp_field_link(),$this.children(".sp_wpcp-field-media").sp_wpcp_field_media(),$this.children(".sp_wpcp-field-map").sp_wpcp_field_map(),$this.children(".sp_wpcp-field-slider").sp_wpcp_field_slider(),$this.children(".sp_wpcp-field-sorter").sp_wpcp_field_sorter(),$this.children(".sp_wpcp-field-spinner").sp_wpcp_field_spinner(),$this.children(".sp_wpcp-field-switcher").sp_wpcp_field_switcher(),$this.children(".sp_wpcp-field-typography").sp_wpcp_field_typography(),$this.children(".sp_wpcp-field-upload").sp_wpcp_field_upload(),$this.children(".sp_wpcp-field-wp_editor").sp_wpcp_field_wp_editor(),$this.children(".sp_wpcp-field-tabbed").sp_wpcp_field_tabbed(),$this.children(".sp_wpcp-field-box_shadow").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-border").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-background").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-color").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-color_group").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-image_color").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-link_color").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-typography").find(".sp_wpcp-color").sp_wpcp_color(),$this.children(".sp_wpcp-field-select").find(".sp_wpcp-chosen").sp_wpcp_chosen(),$this.children(".sp_wpcp-field-checkbox").find(".sp_wpcp-checkbox").sp_wpcp_checkbox(),$this.children(".sp_wpcp-field-button_set").find(".sp_wpcp-siblings").sp_wpcp_siblings(),$this.children(".sp_wpcp-field-image_select").find(".sp_wpcp-siblings").sp_wpcp_siblings(),$this.children(".sp_wpcp-field-carousel_type").find(".sp_wpcp-siblings").sp_wpcp_siblings(),$this.children(".sp_wpcp-field-palette").find(".sp_wpcp-siblings").sp_wpcp_siblings(),$this.children(".sp_wpcp-field").find(".sp_wpcp-help").sp_wpcp_help(),$(".wpcp-admin-header").find(".sp_wpcp-support-area").sp_wpcp_help(),settings.dependency&&$this.sp_wpcp_dependency(),$this.data("inited",!0),"external-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()&&$(".wpcp_image_caption_font_load, .wpcp_image_caption_typography").addClass("sp_wpcp-depend-on"),$(document).trigger("sp_wpcp-reload-script",$this))}))},$(document).ready((function(){$(".sp_wpcp-save").sp_wpcp_save(),$(".sp_wpcp-options").sp_wpcp_options(),$(".sp_wpcp-sticky-header").sp_wpcp_sticky(),$(".sp_wpcp-nav-options").sp_wpcp_nav_options(),$(".sp_wpcp-nav-metabox").sp_wpcp_nav_metabox(),$(".sp_wpcp-taxonomy").sp_wpcp_taxonomy(),$(".sp_wpcp-page-templates").sp_wpcp_page_templates(),$(".sp_wpcp-post-formats").sp_wpcp_post_formats(),$(".sp_wpcp-shortcode").sp_wpcp_shortcode(),$(".sp_wpcp-confirm").sp_wpcp_confirm(),$(".sp_wpcp-expand-all").sp_wpcp_expand_all(),$(".sp_wpcp-onload").sp_wpcp_reload_script(),$(".widget").sp_wpcp_widgets(),$("#menu-to-edit").sp_wpcp_nav_menu(),$(".sp_wpcp-field-button_clean.wpcp_cache_remove .sp_wpcp--sibling.sp_wpcp--button").on("click",(function(e){e.preventDefault(),e.stopPropagation(),SP_WPCP_Framework.vars.is_confirm&&window.wp.ajax.post("sp_wpcp_clean_transient",{nonce:$("#sp_wpcp_options_noncesp_wpcp_settings").val()}).done((function(response){alert("Cache cleaned")})).fail((function(response){alert("Cache failed to clean"),alert(response.error)}))})),$(".sp_wpcp_post_type select").on("change",(function(event){event.preventDefault();var data={action:"wpcp_get_taxonomies",wpcp_post_type:$(this).val(),ajax_nonce:$("#sp_wpcp_metabox_noncesp_wpcp_upload_options").val()};$.post(ajaxurl,data,(function(resp){$(".sp_wpcp_post_taxonomy select").html(resp),$(".sp_wpcp_post_taxonomy select").trigger("chosen:updated")}))})),$(".sp_wpcp_post_taxonomy select").on("change",(function(event){event.preventDefault();var data={action:"wpcp_get_terms",wpcp_post_taxonomy:$(this).val(),ajax_nonce:$("#sp_wpcp_metabox_noncesp_wpcp_upload_options").val()};$.post(ajaxurl,data,(function(resp){$(".sp_wpcp_taxonomy_terms select").html(resp),$(".sp_wpcp_taxonomy_terms select").trigger("chosen:updated")}))})),$(".sp_wpcp_post_type select").on("change",(function(event){event.preventDefault();var data={action:"wpcp_get_posts",wpcp_post_type:$(this).val(),ajax_nonce:$("#sp_wpcp_metabox_noncesp_wpcp_upload_options").val()};$.post(ajaxurl,data,(function(resp){$(".sp_wpcp_specific_posts select").html(resp),$(".sp_wpcp_specific_posts select").trigger("chosen:updated")}))}));var pt_saved_value=$(".sp_wpcp_post_type select").val(),wpcp_specific_posts;pt_saved_value&&($(".sp_wpcp_specific_posts .sp_wpcp-chosen").data("chosen-settings").data.query_args.post_type=pt_saved_value);var select_value_layout=$(".wpcp_logo_link_show_class").find("input:checked").val(),select_carousel_type=$(".sp_wpcp-field-carousel_type .sp_wpcp--image.sp_wpcp--active").find("input:checked").val();function wpcp_copyToClipboard(element){var $temp=$("<input>");$("body").append($temp),$temp.val($(element).text()).select(),document.execCommand("copy"),$temp.remove()}function wpcp_SelectText(element){var r=document.createRange(),w=element.get(0);r.selectNodeContents(w);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(r)}function getUrlParameter(sParam){var sPageURL,sURLVariables=window.location.search.substring(1).split("&"),sParameterName,i;for(i=0;i<sURLVariables.length;i++)if((sParameterName=sURLVariables[i].split("="))[0]===sParam)return void 0===sParameterName[1]||decodeURIComponent(sParameterName[1]);return!1}if("l_box"!==select_value_layout||"image-carousel"!=select_carousel_type&&"mix-content"!=select_carousel_type?$(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(3) a").hide():$(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(3) a").show(),$(".wpcp_carousel_type, .wpcp_external_type").on("change",(function(){setTimeout((function(){"external-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()&&($(".wpcp_image_caption_font_load, .wpcp_image_caption_typography").addClass("sp_wpcp-depend-on"),$(".wpcp_title_font_load, .wpcp_title_typography, .wpcp_post_content_font_load, .wpcp_post_content_typography, .wpcp_post_readmore_font_load, .wpcp_post_readmore_typography").removeClass("sp_wpcp-depend-on"))}),500)})),$(document).on("click",".wpcp_logo_link_show_class, .sp_wpcp-field-carousel_type",(function(event){event.stopPropagation();var select_value=$(this).find("input:checked").val();"l_box"==select_value||"image-carousel"==select_value||"mix-content"==select_value?$(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(3) a").show():($(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(3) a").hide(),$(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(1) a").trigger("click"))})),$(document).on("click",".sp_wpcp-field-carousel_type",(function(event){event.stopPropagation();var select_value=$(this).find("input:checked").val();"inline"==select_value&&"mix-content"==select_value?$(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(3) a").hide():$(".sp_wpcp-metabox .sp_wpcp-nav.sp_wpcp-nav-metabox li:nth-child(3) a").show()})),$(".wm_clean_cache .sp_wpcp--sibling.sp_wpcp--button").on("click",(function(e){if(e.preventDefault(),SP_WPCP_Framework.vars.is_confirm){var data={action:"wpcp_clean_wm_cache",nonce:$("#sp_wpcp_options_noncesp_wpcp_settings").val()};$.post(ajaxurl,data,(function(resp){alert("Cache cleaned")}))}})),$(".wpcp-shortcode-selectable").on("click",(function(e){e.preventDefault(),wpcp_copyToClipboard($(this)),wpcp_SelectText($(this)),$(this).trigger("focus").select(),jQuery(".spwpc-after-copy-text").animate({opacity:1,bottom:25},300),setTimeout((function(){jQuery(".spwpc-after-copy-text").animate({opacity:0},200),jQuery(".spwpc-after-copy-text").animate({bottom:0},0)}),2e3)})),$(".post-type-sp_wp_carousel .shortcode.column-shortcode input").on("click",(function(e){var copyText;$(this).select(),document.execCommand("copy"),jQuery(".spwpc-after-copy-text").animate({opacity:1,bottom:25},300),setTimeout((function(){jQuery(".spwpc-after-copy-text").animate({opacity:0},200),jQuery(".spwpc-after-copy-text").animate({bottom:0},0)}),2e3)})),getUrlParameter("access_token")){var the_url=window.location.href,parts=the_url.split("&access_token");the_url=parts[0]+"#tab=instagram-settings",window.location.href=the_url}$(".sp_wpcp-field.sp_wpcp-field-insta_group .sp_wpcp-cloneable-item:not(.sp_wpcp-cloneable-hidden)").length>0&&$(".sp_wpcp-field.sp_wpcp-field-insta_group").show();var preview_box=$("#sp-wpcp-preview-box"),preview_display=$("#sp_wpcp_live_preview").hide();function isValidJSONString(str){try{JSON.parse(str)}catch(e){return!1}return!0}$(document).on("click","#sp__wpcp-show-preview:contains(Hide)",(function(e){var _this;e.preventDefault(),$(this).html('<i class="fa fa-eye" aria-hidden="true"></i> Show Preview'),preview_box.html(""),preview_display.hide()})),$(document).on("click","#sp__wpcp-show-preview:not(:contains(Hide))",(function(e){e.preventDefault();var previewJS=wpcp_admin.previewJS,_data=$("form#post").serialize(),_this=$(this),data={action:"sp__wpcp_preview_meta_box",data:_data,ajax_nonce:$("#sp_wpcp_metabox_noncesp_wpcp_live_preview").val()};$.ajax({type:"POST",url:ajaxurl,data:data,error:function(response){console.log(response)},success:function(response){preview_display.show(),preview_box.html(response),$.getScript(previewJS,(function(){_this.html('<i class="fa fa-eye-slash" aria-hidden="true"></i> Hide Preview'),$(document).on("keyup change",".post-type-sp_wp_carousel",(function(e){e.preventDefault(),_this.html('<i class="fa fa-refresh" aria-hidden="true"></i> Update Preview')})),$("html, body").animate({scrollTop:preview_display.offset().top-50},"slow"),$(".wpcp-carousel-preloader").animate({opacity:1},600).hide()})),$(".wpcpro-post-pagination .wpcpro-post-load-more,.wpcpro-post-pagination.wpcpro-post-pagination-number,.wpcpro-load-more button").on("click",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),$(".spwpc-pagination-not-work").animate({opacity:1,bottom:25},300),setTimeout((function(){jQuery(".spwpc-pagination-not-work").animate({opacity:0},200),jQuery(".spwpc-pagination-not-work").animate({bottom:0},0)}),3e3)}))}})}));var $export_type=$(".wpcp_what_export").find("input:checked").val();$(".wpcp_what_export").on("change",(function(){$export_type=$(this).find("input:checked").val()})),$(".wpcp_export .sp_wpcp--button").on("click",(function(event){event.preventDefault();var $shortcode_ids=$(".wpcp_post_ids select").val(),$ex_nonce=$("#sp_wpcp_options_noncesp_wpcp_tools").val(),selected_shortcode;if("all_shortcodes"===$export_type||"selected_shortcodes"===$export_type)var data={action:"wpcp_export_shortcodes",lcp_ids:"selected_shortcodes"===$export_type?$shortcode_ids:"all_shortcodes",nonce:$ex_nonce};else $(".sp_wpcp-form-result.sp_wpcp-form-success").text("No carousel selected.").show(),setTimeout((function(){$(".sp_wpcp-form-result.sp_wpcp-form-success").hide().text("")}),3e3);$.post(ajaxurl,data,(function(resp){if(resp){if(isValidJSONString(resp))var json=JSON.stringify(JSON.parse(resp));else var json=JSON.stringify(resp);var blob=new Blob([json],{type:"application/json"}),link=document.createElement("a"),wpcp_time=$.now();link.href=window.URL.createObjectURL(blob),link.download="wp-carousel-export-"+wpcp_time+".json",link.click(),$(".sp_wpcp-form-result.sp_wpcp-form-success").text("Exported successfully!").show(),setTimeout((function(){$(".sp_wpcp-form-result.sp_wpcp-form-success").hide().text(""),$(".wpcp_post_ids select").val("").trigger("chosen:updated")}),3e3)}}))})),$(".wpcp_import button.import").on("click",(function(event){event.preventDefault();var wpcp_shortcodes=$("#import").prop("files")[0];if(""!=$("#import").val()){var unSanitize=$('.sp_wpcp-field-checkbox input[name="sp_wpcp_tools[import_unSanitize]"]').val(),$im_nonce=$("#sp_wpcp_options_noncesp_wpcp_tools").val(),reader=new FileReader;reader.readAsText(wpcp_shortcodes),reader.onload=function(event){var jsonObj=JSON.stringify(event.target.result);$.ajax({url:ajaxurl,type:"POST",data:{shortcode:jsonObj,action:"wpcp_import_shortcodes",nonce:$im_nonce,unSanitize:unSanitize},success:function(resp){$(".sp_wpcp-form-result.sp_wpcp-form-success").text("Imported successfully!").show(),setTimeout((function(){$(".sp_wpcp-form-result.sp_wpcp-form-success").hide().text(""),$("#import").val(""),window.location.replace($("#wpcp_shortcode_link_redirect").attr("href"))}),2e3)}})}}else $(".sp_wpcp-form-result.sp_wpcp-form-success").text("No exported json file chosen.").show(),setTimeout((function(){$(".sp_wpcp-form-result.sp_wpcp-form-success").hide().text("")}),3e3)}))})),"post-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"external-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").show():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hide(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"content-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"audio-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hide():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"product-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(4)").show():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(4)").hide(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"image-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"video-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()?$(".wpcp_layout .sp_wpcp--sibling.sp_wpcp--image").eq(5).show():$(".wpcp_layout .sp_wpcp--sibling.sp_wpcp--image").eq(5).hide(),"content-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"external-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"audio-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()?$(".sp_wpcp-nav-metabox li:nth-child(3)").hide():$(".sp_wpcp-nav-metabox li:nth-child(3)").show();var $carouselPaginationTab=$(".wp-carousel-display-tabs").find(".sp_wpcp-tabbed-nav a:nth-child(3)");function handleContentVisibility(showContentInnerPadding,showContentBoxPadding,showItemsVerticalAlignment){showContentInnerPadding?$(".wpcp_content_inner_padding").show():$(".wpcp_content_inner_padding").hide(),showContentBoxPadding?$(".wpcp_content_box_padding").show():$(".wpcp_content_box_padding").hide(),showItemsVerticalAlignment?$(".wpcp_content_vertical_alignment").show():$(".wpcp_content_vertical_alignment").hide()}"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()?$carouselPaginationTab.show():$carouselPaginationTab.hide(),$(".wpcp_layout .sp_wpcp--sibling").on("change",(function(){"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()?$carouselPaginationTab.show():$carouselPaginationTab.hide(),"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"thumbnails-slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"justified"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()?$(".wpcp_content_style .sp_wpcp-siblings  .sp_wpcp--sibling:nth-child(7)").hide():$(".wpcp_content_style .sp_wpcp-siblings  .sp_wpcp--sibling:nth-child(7)").show()})),"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"thumbnails-slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"justified"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()?$(".wpcp_content_style .sp_wpcp-siblings  .sp_wpcp--sibling:nth-child(7)").hide():$(".wpcp_content_style .sp_wpcp-siblings  .sp_wpcp--sibling:nth-child(7)").show(),"image-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"video-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()||"audio-carousel"==$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked').val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(5)").show():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(5)").hide(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),$(".wpcp_carousel_type").on("change",(function(){var $_sourceType=$('.wpcp_carousel_type input[name="sp_wpcp_upload_options[wpcp_carousel_type]"]:checked');"image-carousel"==$_sourceType.val()&&"video-carousel"==$_sourceType.val()||"justified"!=$_sourceType.val()||$(".wpcp_layout .sp_wpcp--sibling.sp_wpcp--image").eq(0).trigger("click"),"image-carousel"==$_sourceType.val()||"video-carousel"==$_sourceType.val()?$(".wpcp_layout .sp_wpcp--sibling.sp_wpcp--image").eq(5).show():$(".wpcp_layout .sp_wpcp--sibling.sp_wpcp--image").eq(5).hide(),"image-carousel"==$_sourceType.val()||"mix-content"==$_sourceType.val()?$(".sp_wpcp-nav-metabox li:nth-child(3)").show():$(".sp_wpcp-nav-metabox li:nth-child(3)").hide(),"post-carousel"==$_sourceType.val()||"external-carousel"==$_sourceType.val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").show():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hide(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"image-carousel"==$_sourceType.val()||"video-carousel"==$_sourceType.val()||"audio-carousel"==$_sourceType.val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(5)").show():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(5)").hide(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"product-carousel"==$_sourceType.val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(4)").show():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(4)").hide(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"content-carousel"==$_sourceType.val()||"audio-carousel"==$_sourceType.val()?$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hide():($(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show(),$(".wp-carousel-style-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")),"image-carousel"!==$_sourceType.val()&&"post-carousel"!==$_sourceType.val()&&"product-carousel"!==$_sourceType.val()&&($(".sp_wpcp-field-image_select.wpcp_content_style").find(".sp_wpcp--sibling:nth-child(1)").trigger("click"),$(".wpcp_content_position.default_content").find(".sp_wpcp--sibling:nth-child(1)").trigger("click"))})),"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"thumbnails-slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()?$(".sp_wpcp-nav-metabox li:nth-child(4)").show():$(".sp_wpcp-nav-metabox li:nth-child(4)").hide(),"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&("ticker"==$('.wpcp_carousel_mode input[name="sp_wpcp_shortcode_options[wpcp_carousel_mode]"]:checked').val()||"triple"==$('.wpcp_carousel_mode input[name="sp_wpcp_shortcode_options[wpcp_carousel_mode]"]:checked').val()?($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hide(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hide(),($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hasClass("sp_wpcp-tabbed-active")||$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hasClass("sp_wpcp-tabbed-active"))&&$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")):($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show())),"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&("fashion"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()?($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hide(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hide(),($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hasClass("sp_wpcp-tabbed-active")||$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hasClass("sp_wpcp-tabbed-active"))&&$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")):($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").show())),"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&("shaders"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()||"slicer"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()||"fashion"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()||"shutters"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()?$(".wpcp_image_zoom").hide():$(".wpcp_image_zoom").show()),$(".sp_wpcp-field-image_select.wpcp_layout, .sp_wpcp-field-image_select.wpcp_carousel_mode, .wpcp_slider_style.sp_wpcp-field-image_select").on("change",(function(){"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&("ticker"==$('.wpcp_carousel_mode input[name="sp_wpcp_shortcode_options[wpcp_carousel_mode]"]:checked').val()||"triple"==$('.wpcp_carousel_mode input[name="sp_wpcp_shortcode_options[wpcp_carousel_mode]"]:checked').val()?($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hide(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hide(),($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hasClass("sp_wpcp-tabbed-active")||$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hasClass("sp_wpcp-tabbed-active"))&&$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")):($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").show())),"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&("fashion"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()?($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hide(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hide(),($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").hasClass("sp_wpcp-tabbed-active")||$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").hasClass("sp_wpcp-tabbed-active"))&&$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(1)").trigger("click")):($(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(2)").show(),$(".wp-carousel-carousel-tabs .sp_wpcp-tabbed-nav a:nth-child(3)").show())),"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&("shaders"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()||"slicer"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()||"fashion"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()||"shutters"==$('.wpcp_slider_style input[name="sp_wpcp_shortcode_options[wpcp_slider_style]"]:checked').val()?$(".wpcp_image_zoom").hide():$(".wpcp_image_zoom").show())})),$(".sp_wpcp-field-image_select.wpcp_layout, .wpcp_carousel_mode").on("change",(function(){"thumbnails-slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()&&$(".wpcp_carousel_mode option").removeAttr("selected").filter("[value=standard]").attr("selected",!0),"carousel"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()||"thumbnails-slider"==$('.wpcp_layout input[name="sp_wpcp_shortcode_options[wpcp_layout]"]:checked').val()?$(".sp_wpcp-nav-metabox li:nth-child(4)").show():$(".sp_wpcp-nav-metabox li:nth-child(4)").hide()})),$(".wpcp_slider_animation").on("change",(function(){$(this).find(".sp_wpcp-desc-text").show(),"kenburn"==$(this).find("select").val()||"cube"==$(".wpcp_slider_animation").find("select").val()?$(this).find(".sp_wpcp-desc-text").show():$(this).find(".sp_wpcp-desc-text").hide()})),$(document).on("keyup change",".sp-wpcp-options #sp_wpcp-form",(function(e){var $button;e.preventDefault(),$(this).find(".sp_wpcp-save").css({"background-color":"#00C263","pointer-events":"initial"}).val("Save Settings")})),$(".sp-wpcp-options .sp_wpcp-save").on("click",(function(e){e.preventDefault(),$(this).css({"background-color":"#C5C5C6","pointer-events":"none"}).val("Changes Saved")}));const itemStyle=$(".wpcp_content_style .sp_wpcp--sibling.sp_wpcp--active").find("input").val(),defaultContent=$(".wpcp_content_position.default_content .sp_wpcp--sibling.sp_wpcp--active").find("input").val(),defaultTopBottom="default"==itemStyle&&("bottom"==defaultContent||"top"==defaultContent),defaultLeftRight="default"==itemStyle&&("on_right"==defaultContent||"on_left"==defaultContent);defaultTopBottom&&handleContentVisibility(!1,!1,!1),(defaultLeftRight||"caption_full"==itemStyle)&&handleContentVisibility(!0,!1,!0),$(".wpcp_content_style .sp_wpcp--sibling:nth-child(1),.default_content .sp_wpcp--sibling").on("click",(function(e){var _this=$(this);setTimeout(()=>{var select_value=_this.find("input").val();const itemStyle=$(".wpcp_content_style .sp_wpcp--sibling.sp_wpcp--active").find("input").val();"default"!==itemStyle?"top"==select_value||"bottom"==select_value?handleContentVisibility(!1,!1,!1):handleContentVisibility(!0,!1,!0):handleContentVisibility(!0,!1,!1)},100)}));const overlayStyle=$(".overlay_style .sp_wpcp--sibling.sp_wpcp--active").find("input").val();"full_covered"==overlayStyle&&"with_overlay"==itemStyle&&handleContentVisibility(!0,!0,!0),"full_covered"!=overlayStyle&&"with_overlay"==itemStyle&&handleContentVisibility(!0,!1,!0),$(".wpcp_content_style .sp_wpcp--sibling:nth-child(2),.overlay_style .sp_wpcp--sibling").on("click",(function(e){var select_value=$(this).find("input").val();handleContentVisibility(!0,"left"!=select_value&&"right"!=select_value,!0)}));const captionFullElement=$(".wpcp_content_style .sp_wpcp--sibling:nth-child(3)");function navigationPositionPreview(selector,regex){var str="";$(selector+" option:selected").each((function(){str=$(this).val()}));var src=$(selector+" .sp_wpcp-fieldset img").attr("src"),result=src.match(regex);result&&result[1]&&(src=src.replace(result[1],str),$(selector+" .sp_wpcp-fieldset img").attr("src",src))}captionFullElement.hasClass("sp_wpcp--active")&&handleContentVisibility(!0,!1),captionFullElement.on("click",(function(e){handleContentVisibility(!0,!1)})),"caption_partial"==itemStyle&&handleContentVisibility(!0,!1),$(".wpcp-carousel-nav-position").on("change",(function(){navigationPositionPreview(".wpcp-carousel-nav-position",/carousel-navigation\/(.+)\.svg/)})),$(".wpcp_image_mode").on("change",(function(){var image_mode=$(this).find("select").val(),noteText;$(".wpcp_image_mode .sp_wpcp-fieldset > .sp_wpcp-desc-text").css("display","custom_color"===image_mode?"block":"none")}));var $carouselType=$(".wpcp_carousel_type .sp_wpcp--sibling.sp_wpcp--image.sp_wpcp--active").find("input").val(),$logoLinkType=$(".wpcp_logo_link_show_class .sp_wpcp--sibling.sp_wpcp--active").find("input").val();"post-carousel"===$carouselType||"external-carousel"===$carouselType?($(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(1)").css("display","none"),"l_box"===$logoLinkType&&$(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(2)").trigger("click")):$logoLinkType=$(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(2)").css("display","inline-block"),$(".wpcp_carousel_type .sp_wpcp--sibling").on("change","input",(function(){var $carouselType=$(this).val(),$logoLinkType=$(".wpcp_logo_link_show_class .sp_wpcp--sibling.sp_wpcp--active").find("input").val();"post-carousel"===$carouselType||"external-carousel"===$carouselType?($(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(1)").css("display","none"),"l_box"===$logoLinkType&&$(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(2)").trigger("click")):($(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(1)").css("display","inline-block"),"l_box"!==$logoLinkType&&$(".wpcp_logo_link_show_class .sp_wpcp--sibling:nth-child(1)").trigger("click"))})),jQuery(document).ready((function($){const $imageCarousel=$(".wpcp_carousel_type .sp_wpcp--sibling:first-child");var $carouselType;"image-carousel"===$(".wpcp_carousel_type .sp_wpcp--sibling.sp_wpcp--image.sp_wpcp--active").find("input").val()&&$($imageCarousel).trigger("click")}))}(jQuery,window,document);var WPCarouselSlide=Backbone.Model.extend({defaults:{id:"",title:"",caption:"",alt:"",link:"",type:""}}),WPCarouselSlides=new Backbone.Collection,WPCarouselModalWindow=new wp.media.view.Modal({controller:{trigger:function(){}}}),WPCarouselView=wp.Backbone.View.extend({id:"wpcp_image-meta-edit",tagName:"div",className:"edit-attachment-frame mode-select hide-menu hide-router",template:wp.template("wpcp_image-meta-editor"),events:{"click .edit-media-header .left":"loadPreviousItem","click .edit-media-header .right":"loadNextItem","keyup input":"updateItem","keyup textarea":"updateItem","change input":"updateItem","change textarea":"updateItem","keyup .CodeMirror":"updateCode","blur textarea":"updateItem","change select":"updateItem","click a.wpcp_image-meta-submit":"saveItem","keyup input#link-search":"searchLinks","click div.query-results li":"insertLink","click a.wpcp_image-thumbnail":"insertThumb","click a.wpcp_image-thumbnail-delete":"removeThumb","click button.media-file":"insertMediaFileLinks","click button.attachment-page":"insertAttachmentPageLink"},initialize:function(args){this.is_loading=!1,this.collection=args.collection,this.child_views=args.child_views,this.attachment_id=args.attachment_id,this.attachment_index=0,this.search_timer="";var count=0;this.collection.each((function(model){if(String(model.get("id"))==String(this.attachment_id))return this.model=model,this.attachment_index=count,!1;count++}),this)},updateCode:function(e){$model=this.model,$textarea=this.$el.find(".wpcp_image-html-slide-code"),$model.set("code",this.editor.getValue(),{silent:!0}),$textarea.text()},insertThumb:function(e){$model=this.model,e.preventDefault();var fieldClassName=this.$el.data("field"),wpcp_image_media_frame=wp.media.frames.wpcp_image_media_frame=wp.media({className:"media-frame wpcp_image-media-frame",frame:"select",multiple:!1,title:sp_wpcp_metabox_local.videoframe,library:{type:"image"},button:{text:sp_wpcp_metabox_local.videouse}});wpcp_image_media_frame.on("select",(function(){var thumbnail=wpcp_image_media_frame.state().get("selection").first().toJSON();$model.set("src",thumbnail.url,{silent:!0}),jQuery("div.thumbnail > img",$parent.find(".media-frame-content")).attr("src",thumbnail.url)})),wpcp_image_media_frame.open()},removeThumb:function(e){e.preventDefault(),$model=this.model,$parent=this.$el.parent(),jQuery("div.thumbnail > img",$parent.find(".media-frame-content")).attr("src",""),$model.set("src","",{silent:!0})},render:function(){if(!this.model)return!1;function decodeAndCleanText(text){if(!text)return"";const parser=new DOMParser,decodedText=parser.parseFromString(text,"text/html").documentElement.textContent;return decodedText.trim()}this.$el.html(this.template(this.model.attributes)),this.child_views.length>0&&this.child_views.forEach((function(view){var child_view=new view({model:this.model});this.$el.find("div.addons").append(child_view.render().el)}),this),this.$el.find("textarea[name=caption]").val(decodeAndCleanText(this.model.get("caption"))),this.$el.find("textarea[name=description]").val(decodeAndCleanText(this.model.get("description"))),this.$el.find("select[name=crop_position]").val(this.model.get("crop_position"));var $current_element=this;return this.$el.find(".wpcp-tabs-nav a").on("click",(function(event){event.preventDefault(),$current_element.$el.find(".tab-active").removeClass("tab-active"),jQuery(this).parent().addClass("tab-active"),$current_element.$el.find(".wpcp-tabs-stage > div").hide(),jQuery(jQuery(this).attr("href")).show()})),jQuery(".wpcp-tabs-nav a:first").trigger("click"),setTimeout((function(){quicktags({id:"caption",buttons:"strong,em,link,ul,ol,li,close"}),quicktags({id:"description",buttons:"strong,em,link,ul,ol,li,close"}),QTags._buttonsInit()}),100),wpLink.init,0===this.attachment_index&&this.$el.find("button.left").addClass("disabled"),this.attachment_index==this.collection.length-1&&this.$el.find("button.right").addClass("disabled"),textarea=this.$el.find(".wpcp_image-html-slide-code"),textarea.length&&(this.editor=CodeMirror.fromTextArea(textarea[0],{enterMode:"keep",indentUnit:4,electricChars:!1,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,mode:"php",smartIndent:!1,tabMode:"shift",theme:"ttcn"})),this.$el.trigger("wpcp_imageRenderMeta"),this.$el.trigger("insertMediaFileLinks"),this},loading:function(){this.is_loading=!0,this.$el.find(".spinner").css("visibility","visible")},loaded:function(response){this.is_loading=!1,this.$el.find(".spinner").css("visibility","hidden"),void 0!==response&&alert(response)},loadPreviousItem:function(){this.attachment_index--,this.attachment_index<0&&(this.attachment_index=this.collection.length-1),this.model=this.collection.at(this.attachment_index),this.attachment_id=this.model.get("id"),this.render()},loadNextItem:function(){this.attachment_index++,this.attachment_index>this.collection.length-1&&(this.attachment_index=0),this.model=this.collection.at(this.attachment_index),this.attachment_id=this.model.get("id"),this.render()},updateItem:function(event){""!=event.target.name&&("checkbox"==event.target.type?value=event.target.checked?1:0:value=event.target.value,this.model.set(event.target.name,value))},saveItem:function(event){event.preventDefault(),this.trigger("loading"),wp.media.ajax("wpcp_image_save_meta",{context:this,data:{nonce:sp_wpcp_metabox_local.save_nonce,post_id:sp_wpcp_metabox_local.id,attach_id:this.model.get("id"),meta:this.model.attributes},success:function(response){this.trigger("loaded loaded:success");var item=JSON.stringify(this.model.attributes);jQuery("ul#wpcp_image-output li#"+this.model.get("id")).attr("data-wpcp_image-model",item);var saved=this.$el.find(".saved");saved.fadeIn(),setTimeout((function(){saved.fadeOut()}),1500)},error:function(error_message){this.trigger("loaded loaded:error",error_message)}})},searchLinks:function(event){},insertLink:function(event){},insertMediaFileLinks:function(event){this.trigger("loading"),wp.media.ajax("wpcp_image_get_attachment_links",{context:this,data:{nonce:sp_wpcp_metabox_local.save_nonce,attachment_id:this.model.get("id")},success:function(response){this.model.set("wpcplink",response.media_link),this.trigger("loaded loaded:success"),this.render()},error:function(error_message){this.trigger("loaded loaded:error",error_message)}})},insertAttachmentPageLink:function(event){this.trigger("loading"),wp.media.ajax("wpcp_image_get_attachment_links",{context:this,data:{nonce:sp_wpcp_metabox_local.save_nonce,attachment_id:this.model.get("id")},success:function(response){this.model.set("wpcplink",response.attachment_page),this.trigger("loaded loaded:success"),this.render()},error:function(error_message){this.trigger("loaded loaded:error",error_message)}})}}),WPCarouselChildViews=[],WPCarouselContentViews=[];function WPCarouselSlidesUpdate(selected){var $items;WPCarouselSlides.reset(),jQuery(".edit-attachment-modify").each((function(){var wpcp_image_slide=jQuery.parseJSON(jQuery(this).attr("data-wpcp_image-model"));WPCarouselSlides.add(new WPCarouselSlide(wpcp_image_slide))}))}!function($){var copyAttachmentURLClipboard,copyAttachmentURLSuccessTimeout;($(document).ready((function(){wpcp_image_edit={init:function(){WPCarouselSlidesUpdate(),$(document).on("click.wpcp_imageModify",".edit-attachment-modify",(function(e){e.preventDefault();var attachment_id=$(this).data("id");WPCarouselModalWindow.content(new WPCarouselView({collection:WPCarouselSlides,child_views:WPCarouselChildViews,attachment_id:attachment_id})),WPCarouselModalWindow.open(),$(document).trigger("wpcp_imageEditOpen"),$(".CodeMirror").each((function(i,el){el.CodeMirror.refresh()}))}))}},wpcp_image_edit.init()})),$(document).on("wpcp_imageUploaded",(function(){wpcp_image_edit.init()})),"undefined"!=typeof ClipboardJS)&&new ClipboardJS(".copy-attachment-url").on("success",(function(event){var triggerElement=$(event.trigger),successElement=$(".success",triggerElement.closest(".copy-to-clipboard-container"));event.clearSelection(),clearTimeout(copyAttachmentURLSuccessTimeout),successElement.removeClass("hidden"),copyAttachmentURLSuccessTimeout=setTimeout((function(){successElement.addClass("hidden")}),3e3),wp.a11y.speak(wp.i18n.__("The file URL has been copied to your clipboard"))}))}(jQuery);